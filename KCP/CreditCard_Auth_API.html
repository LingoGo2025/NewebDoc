<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://www.newebpay.com/images/head.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://www.newebpay.com/images/head.ico" type="image/x-icon">      
    <title data-i18n="page_title"></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        html { scroll-behavior: smooth; }
        body { background-color: #f8fafc; }
        
        /* Custom Scrollbar - Modified to target the new scrollable class */
        .scrollable-area::-webkit-scrollbar { width: 6px; }
        .scrollable-area::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 3px; }
        
        /* Navigation Active State */
        .sidebar-active { background-color: #e0f2fe; color: #0284c7; border-right: 4px solid #0284c7; font-weight: 600; }
        
        /* Tabs */
        .tab-btn { border-bottom: 2px solid transparent; transition: all 0.3s; }
        .tab-btn:hover { color: #60a5fa; }
        .tab-btn.active { border-bottom-color: #3b82f6; color: #3b82f6; font-weight: 600; background-color: rgba(59, 130, 246, 0.05); }
        
        /* Table Styles */
        .params-table th { background-color: #f1f5f9; color: #475569; font-weight: 700; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 0.05em; }
        .params-table td { vertical-align: top; color: #334155; }
        .params-table tr:hover { background-color: #f8fafc; }

        /* Language Switcher Active State (Legacy CSS kept for reference, not used in Select) */
        .lang-btn.active { background-color: white; color: #2563eb; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); font-weight: 700; }
        .lang-btn { color: #64748b; font-weight: 500; }
    </style>
</head>
<body class="text-slate-800 font-sans">

    <header class="lg:hidden bg-white shadow-sm p-4 sticky top-0 z-50 flex justify-between items-center border-b border-slate-200">
        <h1 class="text-lg font-bold text-blue-700 flex items-center">
            <i class="fas fa-credit-card mr-2"></i> <span data-i18n="header_mobile_title"></span>
        </h1>
        <button id="menu-btn" class="text-slate-600 focus:outline-none hover:text-blue-600 transition">
            <i class="fas fa-bars text-2xl"></i>
        </button>
    </header>

    <div class="flex min-h-screen">
        <!-- Modified Sidebar Structure: Flex Column layout for sticky footer -->
        <aside id="sidebar" class="fixed inset-y-0 left-0 w-72 bg-white shadow-xl transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 border-r border-slate-200 flex flex-col">
            
            <!-- Top Section -->
            <div class="p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-white shrink-0">
                <h2 class="text-2xl font-bold text-blue-700 tracking-tight" data-i18n="sidebar_brand"></h2>
                <p class="text-sm text-slate-500 mt-1 font-medium"><span data-i18n="sidebar_subtitle"></span><br><span class="text-xs text-slate-400" data-i18n="sidebar_version_note"></span></p>
                
                <!-- Version Tag (Language switcher moved to bottom) -->
                <div class="mt-4">
                    <div class="text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full inline-block font-mono font-semibold">Ver: NPA-B11-2.5.0</div>
                </div>
            </div>

            <!-- Scrollable Navigation Area -->
            <div class="flex-1 overflow-y-auto scrollable-area">
                <nav class="p-4 space-y-1">
                    <a href="#intro" class="nav-link block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-info-circle w-6 group-hover:text-blue-500 transition-colors"></i> <span data-i18n="nav_intro"></span>
                    </a>
                    <a href="#setup" class="nav-link block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-cogs w-6 group-hover:text-blue-500 transition-colors"></i> <span data-i18n="nav_setup"></span>
                    </a>
                    <a href="#tool" class="nav-link block px-4 py-3 text-sm text-purple-700 bg-purple-50 hover:bg-purple-100 hover:text-purple-800 rounded-lg transition-colors group border border-purple-100 mb-4 shadow-sm">
                        <i class="fas fa-wrench w-6 group-hover:text-purple-600 transition-colors"></i> <span data-i18n="nav_tool"></span>
                    </a>
                    <div class="px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider mt-4" data-i18n="nav_group_api"></div>
                    <a href="#request" class="nav-link block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-paper-plane w-6 group-hover:text-blue-500 transition-colors"></i> <span data-i18n="nav_request"></span>
                    </a>
                     <a href="#encryption" class="nav-link block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-lock w-6 group-hover:text-blue-500 transition-colors"></i> <span data-i18n="nav_encryption"></span>
                    </a>
                    <a href="#response" class="nav-link block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-reply w-6 group-hover:text-blue-500 transition-colors"></i> <span data-i18n="nav_response"></span>
                    </a>
                    <a href="#errors" class="nav-link block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-exclamation-triangle w-6 group-hover:text-blue-500 transition-colors"></i> <span data-i18n="nav_errors"></span>
                    </a>
                    <!-- New Test Cards Link -->
                    <a href="#testcards" class="nav-link block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-credit-card w-6 group-hover:text-blue-500 transition-colors"></i> <span data-i18n="nav_testcards"></span>
                    </a>
                    <a href="#example" class="nav-link block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-code w-6 group-hover:text-blue-500 transition-colors"></i> <span data-i18n="nav_example"></span>
                    </a>
                </nav>
            </div>

            <!-- Bottom Footer Section with Language Switcher -->
            <div class="p-4 border-t border-slate-200 bg-slate-50 shrink-0">
                <div class="relative group w-full">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-slate-400">
                        <i class="fas fa-globe"></i>
                    </div>
                    <select id="lang-select" onchange="changeLang(this.value)" class="w-full appearance-none bg-white hover:bg-white text-slate-600 font-medium py-2.5 pl-10 pr-8 rounded-lg text-sm transition-all focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer border border-slate-300 hover:border-blue-400 shadow-sm">
                        <!-- Options will be injected by JS based on langData -->
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 group-hover:text-slate-700">
                        <i class="fas fa-chevron-up text-xs"></i>
                    </div>
                </div>
            </div>

        </aside>

        <main class="flex-1 lg:ml-72 p-4 lg:p-8 w-[95%] mx-auto max-w-[1920px]">
            
            <section id="intro" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h1 class="text-3xl font-bold text-slate-900" data-i18n="intro_title"></h1>
                </div>
                
                <div class="bg-white p-6 lg:p-8 rounded-xl shadow-sm border border-slate-200">
                    <p class="text-slate-700 leading-relaxed mb-6 text-lg" data-i18n="intro_desc"></p>
                    
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                        <span class="bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center text-sm mr-2">Flow</span> 
                        <span data-i18n="intro_flow_title"></span>
                    </h3>
                    <div class="bg-slate-50 rounded-xl p-6 border border-slate-200">
                        <ol class="list-decimal list-inside space-y-3 text-slate-700 font-medium ml-2">
                            <li data-i18n="intro_step_1"></li>
                            <li data-i18n="intro_step_2"></li>
                            <li data-i18n="intro_step_3"></li>
                            <li data-i18n="intro_step_4"></li>
                            <li data-i18n="intro_step_5"></li>
                            <li data-i18n="intro_step_6"></li>
                        </ol>
                    </div>
                </div>
            </section>

            <section id="setup" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="setup_title"></h2>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-100">
                            <h3 class="font-bold text-slate-800 mb-2 flex items-center"><i class="fas fa-user-check text-blue-500 mr-2"></i> <span data-i18n="setup_card1_title"></span></h3>
                            <p class="text-sm text-slate-600" data-i18n="setup_card1_desc"></p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-100">
                            <h3 class="font-bold text-slate-800 mb-2 flex items-center"><i class="fas fa-network-wired text-blue-500 mr-2"></i> <span data-i18n="setup_card2_title"></span></h3>
                            <p class="text-sm text-slate-600">
                                <span data-i18n="setup_card2_desc"></span>
                                <br><span class="text-red-500 text-xs" data-i18n="setup_card2_note"></span>
                            </p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-100">
                            <h3 class="font-bold text-slate-800 mb-2 flex items-center"><i class="fas fa-key text-blue-500 mr-2"></i> <span data-i18n="setup_card3_title"></span></h3>
                            <p class="text-sm text-slate-600" data-i18n="setup_card3_desc"></p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-100">
                            <h3 class="font-bold text-slate-800 mb-2 flex items-center"><i class="fab fa-apple text-blue-500 mr-2"></i> <span data-i18n="setup_card4_title"></span></h3>
                            <p class="text-sm text-slate-600" data-i18n="setup_card4_desc"></p>
                        </div>
                    </div>
                </div>
            </section>

             <section id="tool" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-purple-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="tool_title"></h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-md border border-purple-100 overflow-hidden">
                    <div class="bg-purple-50 p-4 border-b border-purple-100">
                        <p class="text-purple-800 text-sm" data-i18n="tool_intro"></p>
                    </div>

                    <div class="flex border-b border-slate-200">
                        <button onclick="switchToolTab('aes-encrypt')" class="tool-tab-btn active flex-1 py-4 text-sm font-bold text-center hover:bg-slate-50 transition border-b-2 border-purple-600 text-purple-600">
                            <i class="fas fa-lock mr-2"></i> <span data-i18n="tool_tab_encrypt"></span>
                        </button>
                        <button onclick="switchToolTab('aes-decrypt')" class="tool-tab-btn flex-1 py-4 text-sm font-bold text-center hover:bg-slate-50 transition border-b-2 border-transparent text-slate-500">
                            <i class="fas fa-unlock mr-2"></i> <span data-i18n="tool_tab_decrypt"></span>
                        </button>
                        <button onclick="switchToolTab('checkcode')" class="tool-tab-btn flex-1 py-4 text-sm font-bold text-center hover:bg-slate-50 transition border-b-2 border-transparent text-slate-500">
                            <i class="fas fa-shield-alt mr-2"></i> <span data-i18n="tool_tab_checkcode"></span>
                        </button>
                    </div>

                    <div class="p-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 pb-6 border-b border-slate-100">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Hash Key (32 bytes)</label>
                                <input type="text" id="toolKey" data-i18n-placeholder="tool_ph_key" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm bg-slate-50">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Hash IV (16 bytes)</label>
                                <input type="text" id="toolIv" data-i18n-placeholder="tool_ph_iv" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm bg-slate-50">
                            </div>
                        </div>

                        <div id="aes-encrypt" class="tool-content active">
                            <div class="mb-4">
                                <label class="block text-sm font-bold text-slate-700 mb-2" data-i18n="tool_lbl_qs"></label>
                                <textarea id="encryptInput" rows="4" data-i18n-placeholder="tool_ph_qs" class="w-full p-3 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm text-slate-600"></textarea>
                                <p class="text-xs text-slate-400 mt-1 text-right" data-i18n="tool_note_urlencode"></p>
                            </div>
                            <button onclick="runEncrypt()" class="bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700 transition shadow-sm font-bold text-sm">
                                <i class="fas fa-arrow-down mr-1"></i> <span data-i18n="tool_btn_encrypt"></span>
                            </button>
                            <div class="mt-4">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="tool_lbl_hex"></label>
                                <div class="relative">
                                    <textarea id="encryptOutput" readonly rows="3" class="w-full p-3 bg-slate-800 text-green-400 rounded font-mono text-sm border-none focus:ring-0"></textarea>
                                </div>
                            </div>
                        </div>

                        <div id="aes-decrypt" class="tool-content hidden">
                             <div class="mb-4">
                                <label class="block text-sm font-bold text-slate-700 mb-2" data-i18n="tool_lbl_enc_hex"></label>
                                <textarea id="decryptInput" rows="4" data-i18n-placeholder="tool_ph_enc_hex" class="w-full p-3 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm text-slate-600"></textarea>
                            </div>
                            <button onclick="runDecrypt()" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition shadow-sm font-bold text-sm">
                                <i class="fas fa-arrow-down mr-1"></i> <span data-i18n="tool_btn_decrypt"></span>
                            </button>
                            <div class="mt-4">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="tool_lbl_decrypt_res"></label>
                                <div class="relative">
                                    <textarea id="decryptOutput" readonly rows="3" class="w-full p-3 bg-slate-800 text-green-400 rounded font-mono text-sm border-none focus:ring-0"></textarea>
                                </div>
                            </div>
                        </div>

                        <div id="checkcode" class="tool-content hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="tool_lbl_amt"></label>
                                    <input type="text" id="ccAmt" placeholder="100" class="w-full p-2 border border-slate-300 rounded font-mono text-sm">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="tool_lbl_mid"></label>
                                    <input type="text" id="ccMid" placeholder="MS12345678" class="w-full p-2 border border-slate-300 rounded font-mono text-sm">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="tool_lbl_ord"></label>
                                    <input type="text" id="ccOrd" placeholder="ORD001" class="w-full p-2 border border-slate-300 rounded font-mono text-sm">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="tool_lbl_trade"></label>
                                    <input type="text" id="ccTrade" placeholder="211202..." class="w-full p-2 border border-slate-300 rounded font-mono text-sm">
                                </div>
                            </div>
                            <button onclick="runCheckCode()" class="bg-amber-600 text-white px-6 py-2 rounded hover:bg-amber-700 transition shadow-sm font-bold text-sm">
                                <i class="fas fa-magic mr-1"></i> <span data-i18n="tool_btn_checkcode"></span>
                            </button>
                            
                            <div class="mt-4 p-4 bg-slate-50 rounded border border-slate-200">
                                <p class="text-xs text-slate-500 mb-1" data-i18n="tool_lbl_prehash"></p>
                                <code id="ccPreHash" class="block text-xs text-slate-600 break-all mb-3 font-mono"></code>
                                
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="tool_lbl_checkcode_res"></label>
                                <input type="text" id="ccOutput" readonly class="w-full p-3 bg-slate-800 text-yellow-400 rounded font-mono text-sm border-none focus:ring-0">
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="request" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="req_title"></h2>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 border-l-4 border-blue-500 pl-3" data-i18n="req_api_info"></h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div class="bg-slate-50 p-3 rounded border border-slate-100">
                            <div class="text-xs text-slate-500 uppercase mb-1">Method</div>
                            <div class="font-mono font-bold text-green-600 text-lg">POST</div>
                        </div>
                        <div class="bg-slate-50 p-3 rounded border border-slate-100 md:col-span-2">
                            <div class="flex flex-col space-y-2">
                                <div>
                                    <div class="text-xs text-slate-500 uppercase mb-1" data-i18n="req_url_prod"></div>
                                    <div class="font-mono text-blue-600 select-all font-medium">https://core.newebpay.com/API/CreditCard/withIdentity</div>
                                </div>
                                <div class="border-t border-slate-200 pt-2">
                                    <div class="text-xs text-slate-500 uppercase mb-1" data-i18n="req_url_test"></div>
                                    <div class="font-mono text-slate-500 select-all">https://ccore.newebpay.com/API/CreditCard/withIdentity</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden mb-8">
                    <div class="p-4 bg-slate-100 border-b border-slate-200">
                        <h3 class="font-bold text-slate-700" data-i18n="req_lvl1_title"></h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm params-table">
                            <thead class="bg-slate-50 border-b border-slate-200">
                                <tr>
                                    <th class="px-6 py-4 w-1/6" data-i18n="th_param"></th>
                                    <th class="px-6 py-4 w-1/6" data-i18n="th_name"></th>
                                    <th class="px-6 py-4 w-24 text-center" data-i18n="th_required"></th>
                                    <th class="px-6 py-4" data-i18n="th_type"></th>
                                    <th class="px-6 py-4 w-1/3" data-i18n="th_note"></th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-200">
                                <tr>
                                    <td class="px-6 py-4 font-mono font-bold text-blue-600">MerchantID_</td>
                                    <td class="px-6 py-4" data-i18n="param_mid_name"></td>
                                    <td class="px-6 py-4 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-4 font-mono text-xs">Varchar(15)</td>
                                    <td class="px-6 py-4" data-i18n="param_mid_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 font-mono font-bold text-blue-600">PostData_</td>
                                    <td class="px-6 py-4" data-i18n="param_post_name"></td>
                                    <td class="px-6 py-4 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-4 font-mono text-xs">Text</td>
                                    <td class="px-6 py-4" data-i18n="param_post_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 font-mono font-bold text-blue-600">Pos_</td>
                                    <td class="px-6 py-4" data-i18n="param_pos_name"></td>
                                    <td class="px-6 py-4 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-4 font-mono text-xs">Varchar(6)</td>
                                    <td class="px-6 py-4" data-i18n="param_pos_note"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-4 bg-slate-100 border-b border-slate-200 flex justify-between items-center">
                        <h3 class="font-bold text-slate-700" data-i18n="req_lvl2_title"></h3>
                        <span class="text-xs text-slate-500 bg-white px-2 py-1 rounded border">AES-256-CBC Encrypted</span>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm params-table">
                            <thead class="bg-slate-50 border-b border-slate-200">
                                <tr>
                                    <th class="px-6 py-4 w-32" data-i18n="th_param"></th>
                                    <th class="px-6 py-4 w-32" data-i18n="th_name"></th>
                                    <th class="px-6 py-4 w-16 text-center" data-i18n="th_required"></th>
                                    <th class="px-6 py-4 w-24" data-i18n="th_type"></th>
                                    <th class="px-6 py-4" data-i18n="th_note"></th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-200">
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">TimeStamp</td>
                                    <td class="px-6 py-3" data-i18n="p_ts_name"></td>
                                    <td class="px-6 py-3 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(30)</td>
                                    <td class="px-6 py-3" data-i18n="p_ts_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">Version</td>
                                    <td class="px-6 py-3" data-i18n="p_ver_name"></td>
                                    <td class="px-6 py-3 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(5)</td>
                                    <td class="px-6 py-3" data-i18n="p_ver_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">MerchantOrderNo</td>
                                    <td class="px-6 py-3" data-i18n="p_ord_name"></td>
                                    <td class="px-6 py-3 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(30)</td>
                                    <td class="px-6 py-3" data-i18n="p_ord_note"></td>
                                </tr>
                                <tr class="bg-yellow-50">
                                    <td class="px-6 py-3 font-mono font-bold text-blue-700">Amt</td>
                                    <td class="px-6 py-3 font-bold text-blue-900" data-i18n="p_amt_name"></td>
                                    <td class="px-6 py-3 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-3 font-mono text-xs">Int(10)</td>
                                    <td class="px-6 py-3 font-medium text-slate-800" data-i18n="p_amt_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">ProdDesc</td>
                                    <td class="px-6 py-3" data-i18n="p_desc_name"></td>
                                    <td class="px-6 py-3 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(50)</td>
                                    <td class="px-6 py-3" data-i18n="p_desc_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">PayerEmail</td>
                                    <td class="px-6 py-3" data-i18n="p_email_name"></td>
                                    <td class="px-6 py-3 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(50)</td>
                                    <td class="px-6 py-3" data-i18n="p_email_note"></td>
                                </tr>
                                <!-- New Fields Start -->
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">CardHolderFirstName</td>
                                    <td class="px-6 py-3" data-i18n="p_fname_name"></td>
                                    <td class="px-6 py-3 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(45)</td>
                                    <td class="px-6 py-3" data-i18n="p_fname_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">CardHolderLastName</td>
                                    <td class="px-6 py-3" data-i18n="p_lname_name"></td>
                                    <td class="px-6 py-3 text-center text-green-600"><i class="fas fa-check"></i></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(45)</td>
                                    <td class="px-6 py-3" data-i18n="p_lname_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">CardHolderPhone</td>
                                    <td class="px-6 py-3" data-i18n="p_phone_name"></td>
                                    <td class="px-6 py-3 text-center text-slate-400"></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(45)</td>
                                    <td class="px-6 py-3" data-i18n="p_phone_note"></td>
                                </tr>
                                <!-- New Fields End -->
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">CardNo</td>
                                    <td class="px-6 py-3" data-i18n="p_card_name"></td>
                                    <td class="px-6 py-3 text-center font-bold text-slate-500">+</td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(19)</td>
                                    <td class="px-6 py-3" data-i18n="p_card_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">Exp</td>
                                    <td class="px-6 py-3" data-i18n="p_exp_name"></td>
                                    <td class="px-6 py-3 text-center font-bold text-slate-500">+</td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(4)</td>
                                    <td class="px-6 py-3" data-i18n="p_exp_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">Inst</td>
                                    <td class="px-6 py-3" data-i18n="p_inst_name"></td>
                                    <td class="px-6 py-3 text-center text-slate-400"></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar(2)</td>
                                    <td class="px-6 py-3" data-i18n="p_inst_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">Red</td>
                                    <td class="px-6 py-3" data-i18n="p_red_name"></td>
                                    <td class="px-6 py-3 text-center text-slate-400"></td>
                                    <td class="px-6 py-3 font-mono text-xs">Int(1)</td>
                                    <td class="px-6 py-3" data-i18n="p_red_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">CardAE</td>
                                    <td class="px-6 py-3" data-i18n="p_ae_name"></td>
                                    <td class="px-6 py-3 text-center text-slate-400"></td>
                                    <td class="px-6 py-3 font-mono text-xs">Int(1)</td>
                                    <td class="px-6 py-3" data-i18n="p_ae_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">APPLEPAYTYPE</td>
                                    <td class="px-6 py-3">Apple Pay Token</td>
                                    <td class="px-6 py-3 text-center text-slate-400"></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar</td>
                                    <td class="px-6 py-3" data-i18n="p_apple_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">ANDROIDPAY</td>
                                    <td class="px-6 py-3">Google Pay Token</td>
                                    <td class="px-6 py-3 text-center text-slate-400"></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar</td>
                                    <td class="px-6 py-3" data-i18n="p_google_note"></td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-3 font-mono font-medium">SAMSUNGPAY</td>
                                    <td class="px-6 py-3">Samsung Pay Token</td>
                                    <td class="px-6 py-3 text-center text-slate-400"></td>
                                    <td class="px-6 py-3 font-mono text-xs">Varchar</td>
                                    <td class="px-6 py-3" data-i18n="p_samsung_note"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="encryption" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="enc_title"></h2>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                        <span class="w-6 h-6 bg-blue-100 text-blue-600 rounded flex items-center justify-center text-xs mr-2">4.1</span>
                        <span data-i18n="enc_aes_title"></span>
                    </h3>
                    <p class="text-slate-600 mb-4" data-i18n="enc_aes_desc"></p>
                    
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-4">
                        <div class="flex">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">1</div>
                            <div class="ml-4">
                                <h4 class="font-bold text-slate-800" data-i18n="enc_step1_title"></h4>
                                <p class="text-sm text-slate-600 mt-1" data-i18n="enc_step1_desc"></p>
                                <code class="block bg-slate-800 text-slate-300 p-2 rounded mt-2 text-xs font-mono">MerchantID=MS12345678&TimeStamp=1638345756&Version=2.5...</code>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">2</div>
                            <div class="ml-4">
                                <h4 class="font-bold text-slate-800" data-i18n="enc_step2_title"></h4>
                                <p class="text-sm text-slate-600 mt-1" data-i18n="enc_step2_desc"></p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">3</div>
                            <div class="ml-4">
                                <h4 class="font-bold text-slate-800" data-i18n="enc_step3_title"></h4>
                                <p class="text-sm text-slate-600 mt-1" data-i18n="enc_step3_desc"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                        <span class="w-6 h-6 bg-purple-100 text-purple-600 rounded flex items-center justify-center text-xs mr-2">4.2</span>
                        <span data-i18n="enc_chk_title"></span>
                    </h3>
                    <p class="text-slate-600 mb-4" data-i18n="enc_chk_desc"></p>
                    
                    <div class="bg-purple-50 p-4 rounded-lg border border-purple-100 space-y-4">
                         <div class="flex">
                            <div class="flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold">1</div>
                            <div class="ml-4">
                                <h4 class="font-bold text-slate-800" data-i18n="enc_chk_s1_title"></h4>
                                <div class="text-sm text-slate-600 mt-1" data-i18n="enc_chk_s1_desc"></div>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold">2</div>
                            <div class="ml-4">
                                <h4 class="font-bold text-slate-800" data-i18n="enc_chk_s2_title"></h4>
                                <p class="text-sm text-slate-600 mt-1" data-i18n="enc_chk_s2_desc"></p>
                                <code class="block bg-slate-800 text-slate-300 p-2 rounded mt-2 text-xs font-mono break-all">HashIV=...&Amt=...&MerchantID=...&MerchantOrderNo=...&TradeNo=...&HashKey=...</code>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold">3</div>
                            <div class="ml-4">
                                <h4 class="font-bold text-slate-800" data-i18n="enc_chk_s3_title"></h4>
                                <p class="text-sm text-slate-600 mt-1" data-i18n="enc_chk_s3_desc"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="response" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="res_title"></h2>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-6">
                    <p class="text-slate-600 mb-4" data-i18n="res_desc"></p>
                    <table class="w-full text-left text-sm mb-6 border border-slate-200">
                        <thead class="bg-slate-50">
                            <tr>
                                <th class="px-4 py-2 border-b" data-i18n="th_param"></th>
                                <th class="px-4 py-2 border-b" data-i18n="th_desc"></th>
                                <th class="px-4 py-2 border-b" data-i18n="th_note"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="px-4 py-2 border-b font-mono font-bold text-blue-600">Status</td>
                                <td class="px-4 py-2 border-b" data-i18n="res_status_name"></td>
                                <td class="px-4 py-2 border-b">SUCCESS / DECLINE / ERROR </td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 border-b font-mono font-bold text-blue-600">Message</td>
                                <td class="px-4 py-2 border-b" data-i18n="res_msg_name"></td>
                                <td class="px-4 py-2 border-b" data-i18n="res_msg_note"></td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 border-b font-mono font-bold text-blue-600">Result</td>
                                <td class="px-4 py-2 border-b" data-i18n="res_result_name"></td>
                                <td class="px-4 py-2 border-b" data-i18n="res_result_note"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-4 bg-slate-100 border-b border-slate-200">
                        <h3 class="font-bold text-slate-700" data-i18n="res_obj_title"></h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm params-table">
                             <thead class="bg-slate-50 border-b border-slate-200">
                                <tr>
                                    <th class="px-6 py-4 w-32" data-i18n="th_param"></th>
                                    <th class="px-6 py-4 w-32" data-i18n="th_name"></th>
                                    <th class="px-6 py-4 w-24" data-i18n="th_type"></th>
                                    <th class="px-6 py-4" data-i18n="th_note"></th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-200">
                                <tr><td class="px-6 py-3 font-mono font-bold">MerchantID</td><td class="px-6 py-3" data-i18n="res_mid_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(15)</td><td class="px-6 py-3" data-i18n="res_mid_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">Amt</td><td class="px-6 py-3" data-i18n="res_amt_name"></td><td class="px-6 py-3 font-mono text-xs">Int(10)</td><td class="px-6 py-3" data-i18n="res_amt_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">TradeNo</td><td class="px-6 py-3" data-i18n="res_trade_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(20)</td><td class="px-6 py-3" data-i18n="res_trade_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">MerchantOrderNo</td><td class="px-6 py-3" data-i18n="res_ord_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(30)</td><td class="px-6 py-3" data-i18n="res_ord_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">RespondCode</td><td class="px-6 py-3" data-i18n="res_rcode_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(10)</td><td class="px-6 py-3" data-i18n="res_rcode_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">AuthBank</td><td class="px-6 py-3" data-i18n="res_authbank_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(10)</td><td class="px-6 py-3" data-i18n="res_authbank_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">Auth</td><td class="px-6 py-3" data-i18n="res_auth_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(6)</td><td class="px-6 py-3" data-i18n="res_auth_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">AuthDate</td><td class="px-6 py-3" data-i18n="res_adate_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(8)</td><td class="px-6 py-3" data-i18n="res_adate_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">AuthTime</td><td class="px-6 py-3" data-i18n="res_atime_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(6)</td><td class="px-6 py-3" data-i18n="res_atime_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">Card6No</td><td class="px-6 py-3" data-i18n="res_c6_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(6)</td><td class="px-6 py-3" data-i18n="res_c6_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">Card4No</td><td class="px-6 py-3" data-i18n="res_c4_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(4)</td><td class="px-6 py-3" data-i18n="res_c4_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">Exp</td><td class="px-6 py-3" data-i18n="res_exp_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(4)</td><td class="px-6 py-3" data-i18n="res_exp_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">Inst</td><td class="px-6 py-3" data-i18n="res_inst_name"></td><td class="px-6 py-3 font-mono text-xs">Int(10)</td><td class="px-6 py-3" data-i18n="res_inst_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">InstFirst</td><td class="px-6 py-3" data-i18n="res_instf_name"></td><td class="px-6 py-3 font-mono text-xs">Int(10)</td><td class="px-6 py-3" data-i18n="res_instf_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">InstEach</td><td class="px-6 py-3" data-i18n="res_inste_name"></td><td class="px-6 py-3 font-mono text-xs">Int(10)</td><td class="px-6 py-3" data-i18n="res_inste_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">ECI</td><td class="px-6 py-3" data-i18n="res_eci_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar (2)</td><td class="px-6 py-3" data-i18n="res_eci_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">RedAmt</td><td class="px-6 py-3" data-i18n="res_redamt_name"></td><td class="px-6 py-3 font-mono text-xs">Int(10)</td><td class="px-6 py-3" data-i18n="res_redamt_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">PaymentMethod</td><td class="px-6 py-3" data-i18n="res_pm_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(20)</td><td class="px-6 py-3" data-i18n="res_pm_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">IP</td><td class="px-6 py-3" data-i18n="res_ip_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(15)</td><td class="px-6 py-3" data-i18n="res_ip_note"></td></tr>
                                <tr><td class="px-6 py-3 font-mono font-bold">EscrowBank</td><td class="px-6 py-3" data-i18n="res_escrow_name"></td><td class="px-6 py-3 font-mono text-xs">Varchar(10)</td><td class="px-6 py-3" data-i18n="res_escrow_note"></td></tr>
                                <tr class="bg-purple-50"><td class="px-6 py-3 font-mono font-bold text-purple-700">CheckCode</td><td class="px-6 py-3 font-bold text-purple-900" data-i18n="res_chk_name"></td><td class="px-6 py-3 font-mono text-xs">Hash</td><td class="px-6 py-3 font-medium text-slate-800" data-i18n="res_chk_note"></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

             <section id="errors" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="err_title"></h2>
                </div>
                
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-4">
                    <div class="relative">
                        <i class="fas fa-search absolute left-4 top-3.5 text-slate-400"></i>
                        <input type="text" id="errorSearch" data-i18n-placeholder="err_search_ph" class="w-full pl-10 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>
                <div class="overflow-x-auto bg-white rounded-xl shadow-sm border border-slate-200 max-h-[600px] overflow-y-auto">
                    <table class="w-full text-left text-sm" id="errorTable">
                        <thead class="bg-slate-50 text-slate-600 uppercase font-bold sticky top-0 border-b border-slate-200 shadow-sm">
                            <tr>
                                <th class="px-6 py-4 w-1/4" data-i18n="th_err_code"></th>
                                <th class="px-6 py-4" data-i18n="th_err_reason"></th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200 font-mono text-slate-700">
                             <!-- Dynamic Generation -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Test Cards Section (New) -->
            <section id="testcards" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-green-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="tc_title"></h2>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                     <p class="text-slate-600 mb-6" data-i18n="tc_desc"></p>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                            <div class="text-sm text-slate-500 mb-1" data-i18n="tc_lbl_normal"></div>
                            <div class="font-mono text-xl font-bold text-slate-800 tracking-wider">4000-2211-1111-1111</div>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                            <div class="text-sm text-slate-500 mb-1" data-i18n="tc_lbl_bonus"></div>
                            <div class="font-mono text-xl font-bold text-slate-800 tracking-wider">4003-5511-1111-1111</div>
                        </div>
                     </div>
                     <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100 flex items-start">
                        <i class="fas fa-exclamation-circle text-yellow-600 mt-1 mr-3"></i>
                        <p class="text-sm text-slate-700 leading-relaxed" data-i18n="tc_note"></p>
                     </div>
                </div>
            </section>

            <section id="example" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="example_title"></h2>
                </div>
                
                <div class="bg-slate-800 rounded-lg shadow-lg overflow-hidden relative">
                    <div class="flex border-b border-slate-600 bg-slate-900 px-2">
                        <button onclick="switchTab('php', event)" class="tab-btn active px-6 py-3 text-sm font-medium text-slate-300 hover:text-white transition-colors">PHP</button>
                        <button onclick="switchTab('nodejs', event)" class="tab-btn px-6 py-3 text-sm font-medium text-slate-300 hover:text-white transition-colors">Node.js</button>
                        <button onclick="switchTab('python', event)" class="tab-btn px-6 py-3 text-sm font-medium text-slate-300 hover:text-white transition-colors">Python</button>
                        <button onclick="switchTab('csharp', event)" class="tab-btn px-6 py-3 text-sm font-medium text-slate-300 hover:text-white transition-colors">C# (.NET)</button>
                    </div>

                    <textarea id="code-display" readonly class="w-full h-[600px] p-4 bg-[#272822] text-[#f8f8f2] font-mono text-sm leading-6 border-none outline-none resize-none"></textarea>
                </div>
            </section>

        </main>
    </div>
    <script>
        // Multi-language configuration
        const langData = {
            'zh-TW': {name: '',data: {    page_title: ' -  () ',    header_mobile_title: 'NewebPay ',    sidebar_brand: 'NewebPay',    sidebar_subtitle: ' API',    sidebar_version_note: '()',    nav_intro: '',    nav_setup: '',    nav_tool: '',    nav_group_api: 'API ',    nav_request: ' (Request)',    nav_encryption: '',    nav_response: ' (Response)',    nav_errors: '',    nav_example: '',   nav_testcards: '',    intro_title: '',    intro_desc: ' API ',    intro_flow_title: '',    intro_step_1: ' App',    intro_step_2: ' API ',    intro_step_3: '',    intro_step_4: '',    intro_step_5: '',    intro_step_6: ' App ',    setup_title: '',    setup_card1_title: '',    setup_card1_desc: '',    setup_card2_title: 'IP  ()',    setup_card2_desc: ' IP (6)',    setup_card2_note: ' IP ',    setup_card3_title: '',    setup_card3_desc: ' <code>Hash Key</code>  <code>Hash IV</code>',    setup_card4_title: 'Apple Pay ()',    setup_card4_desc: ' [//Apple Pay] ',    tool_title: '',    tool_intro: ' CheckCode',    tool_tab_encrypt: 'AES  (Request)',    tool_tab_decrypt: 'AES  (Response)',    tool_tab_checkcode: 'CheckCode ',    tool_ph_key: ': AAAAvw3YlqoEk6G4HqRKDAYpHKZWxBBB',    tool_ph_iv: ': AAAACC1FplieBBBB',    tool_lbl_qs: ' (Query String)',    tool_ph_qs: ': MerchantID=MS12345678&TimeStamp=1638345756&Version=2.5...',    tool_note_urlencode: ' http_build_query  urlencode ',    tool_btn_encrypt: ' PostData_',    tool_lbl_hex: ' (Hex String)',    tool_lbl_enc_hex: ' (Hex String)',    tool_ph_enc_hex: ': 0ef82edabaf8964d09992d7ec8e575f1...',    tool_btn_decrypt: '',    tool_lbl_decrypt_res: ' ()',    tool_lbl_amt: 'Amt ()',    tool_lbl_mid: 'MerchantID ()',    tool_lbl_ord: 'MerchantOrderNo ()',    tool_lbl_trade: 'TradeNo ()',    tool_btn_checkcode: ' CheckCode',    tool_lbl_prehash: ' (Pre-Hash String):',    tool_lbl_checkcode_res: 'CheckCode  (SHA256 Upper)',    req_title: ' (Request)',    req_api_info: 'API ',    req_url_prod: 'URL ()',    req_url_test: 'URL ()',    req_lvl1_title: ' (HTML Form Post)',    th_param: '',    th_name: '',    th_required: '',    th_type: '',    th_note: '',    th_desc: '',    param_mid_name: '',    param_mid_note: '',    param_post_name: '',    param_post_note: '',    param_pos_name: '',    param_pos_note: ' <code class="bg-slate-100 px-1">JSON</code>',    req_lvl2_title: 'PostData_  ()',    p_ts_name: '',    p_ts_note: 'Unix  1970  1  1  00:00:00<br>2014-05-15 15:00:001400137200',    p_ver_name: '',    p_ver_note: ' <code class="bg-slate-100 px-1">2.5</code>',    p_ord_name: '',    p_ord_note: '_ 201406010001<br>30<br>',    p_amt_name: '',    p_amt_note: '1000<br>',    p_desc_name: '',    p_desc_note: 'Utf-8',    p_email_name: '',    p_email_note: 'Email\'@\'\'.\'abc@yahoo.com<br><br><br><span class="text-red-600 font-bold"> Email </span>',    p_fname_name: '',   p_fname_note: ',,-',   p_lname_name: '',   p_lname_note: ',,-',   p_phone_name: '',   p_phone_note: ',',   p_card_name: '',    p_card_note: '161514-19<br><span class="text-red-600">Apple PayGoogle Pay</span><br>Apple PayGoogle Pay',    p_exp_name: '',    p_exp_note: 'yymm<br><span class="text-red-600">Apple PayGoogle Pay</span><br>Apple PayGoogle Pay',    p_inst_name: '',    p_inst_note: '=<br><br><code class="bg-slate-100 text-xs px-1">3</code>=3, <code class="bg-slate-100 text-xs px-1">6</code>=6, <code class="bg-slate-100 text-xs px-1">12</code>=12, <code class="bg-slate-100 text-xs px-1">18</code>=18, <code class="bg-slate-100 text-xs px-1">24</code>=24, <code class="bg-slate-100 text-xs px-1">30</code>=30',    p_red_name: '',    p_red_note: '<br>1 =, 0=',    p_ae_name: '',    p_ae_note: '<br>1 =, 0=',    p_apple_note: 'payment token<br>payment tokenAPPLEPAY Apple<br><span class="text-red-600">payment tokenurlencodePostData_</span><br>Apple Pay[]/[Apple Pay]',    p_google_note: 'payment token<br>payment tokenGoogle PayGoogle Pay<br><span class="text-red-600">payment tokenurlencodePostData_</span>',    p_samsung_note: 'payment token<br>payment tokenSamsung PaySamsung Pay<br><span class="text-red-600">payment tokenurlencodePostData_</span>',    enc_title: '',    enc_aes_title: 'AES  (PostData_)',    enc_aes_desc: ' Hash Key  Hash IV  AES ',    enc_step1_title: '',    enc_step1_desc: ' <code>http_build_query</code>  (key=value&key2=value2...)',    enc_step2_title: 'AES ',    enc_step2_desc: '<span class="font-bold text-red-600">AES-256-CBC</span><br> (Padding)<span class="font-bold text-red-600">PKCS7</span><br>Key / IV Hash Key  Hash IV',    enc_step3_title: ' (Hex)',    enc_step3_desc: ' (Raw Data)  Hex String () <code>PostData_</code>',    enc_chk_title: 'CheckCode  ()',    enc_chk_desc: ' <code>CheckCode</code> ',    enc_chk_s1_title: '',    enc_chk_s1_desc: '<code>Amt</code>, <code>MerchantID</code>, <code>MerchantOrderNo</code>, <code>TradeNo</code><br> A~Z <ol class="list-disc list-inside text-sm text-slate-600 ml-2 mt-1"><li><code>Amt</code></li><li><code>MerchantID</code></li><li><code>MerchantOrderNo</code></li><li><code>TradeNo</code></li></ol>',    enc_chk_s2_title: ' Key  IV',    enc_chk_s2_desc: ' <code>&</code> <br> <strong class="text-red-600"></strong>  <code>HashIV=IV&</code><br> <strong class="text-red-600"></strong>  <code>&HashKey=Key</code>',    enc_chk_s3_title: 'SHA256 ',    enc_chk_s3_desc: ' SHA256  <strong class="text-red-600"></strong>',    res_title: ' (Response)',    res_desc: ' <strong>JSON</strong>',    res_status_name: '',    res_msg_name: '',    res_msg_note: '[ - ]',    res_result_name: '',    res_result_note: 'Array ',    res_obj_title: 'Result ',    res_mid_name: '',    res_mid_note: '',    res_amt_name: '',    res_amt_note: '',    res_trade_name: '',    res_trade_note: '',    res_ord_name: '',    res_ord_note: '',    res_rcode_name: '',    res_rcode_note: '',    res_authbank_name: '',    res_authbank_note: 'Esun: , Taishin:, CTBC:, NCCC:...',    res_auth_name: '',    res_auth_note: '',    res_adate_name: '',    res_adate_note: 'yyyymmdd20140304',    res_atime_name: '',    res_atime_note: 'hhmmss164828',    res_c6_name: '',    res_c6_note: '',    res_c4_name: '',    res_c4_note: '',    res_exp_name: '',    res_exp_note: 'yymm1912=201912',    res_inst_name: '',    res_inst_note: '',    res_instf_name: '',    res_instf_note: '',    res_inste_name: '',    res_inste_note: '',    res_eci_name: 'ECI',    res_eci_note: '3D',    res_redamt_name: '',    res_redamt_note: '<br>100060940<br>0',    res_pm_name: '',    res_pm_note: 'CREDIT = , FOREIGN = , UNIONPAY = , GOOGLEPAY, SAMSUNGPAY, APPLEPAY...',    res_ip_name: 'IP',    res_ip_note: 'IP',    res_escrow_name: '',    res_escrow_note: '<br>HNCB',    res_chk_name: '',    res_chk_note: '',    err_title: '',    err_search_ph: ' (: TRA10016)  ...',    th_err_code: '',    th_err_reason: ' / ',    err_TRA10001: '',    err_TRA10003: '0',    err_TRA10008: '',    err_TRA10009: '',    err_TRA10012: '',    err_TRA10013: '',    err_TRA10015: '',    err_TRA10016: '',    err_TRA10036: 'RespondType',    err_TRA10037: '',    err_TRA10041: '',    err_TRA10042: '',    err_TRA10043: '',    err_TRA10044: '',    err_TRA10052: '',    err_TRA10053: '',    err_TRA10056: '',    err_TRA10060: '',    err_TRA10061: '',    err_TRA10061_g: '',    err_TRA10067: '',    err_TRA10075: '',    err_TRA10078: '',    err_TRA10079: '',    err_TRA10091: 'Gateway',    err_TRA10100C: '',    err_TRA10100T: '',    err_TRA10101T: '',    err_TRA10101E: '',    err_TRA10100E: '',    err_TRA10102: '',    err_TRA10103: '',    err_TRA10104: '',    err_TRA10105: '',    err_TRA10106: '',    err_TRA10107: '',    err_TRA10672: 'MID',    err_TRA10673: '',    err_TRA10676: '',    err_TRA10681: '',    err_TRA10682: '',    err_TRA10683: '',    err_TRA10684: 'APPLEPAY Certificate ',    err_TRA10685: 'APPLEPAY',    err_TRA10687: 'APPLEPAY Payment Token ',    err_TRA10688: 'APPLEPAY',    err_TRA10690: 'Google Pay',    err_TRA10691: 'Google Pay Payment Token ',    err_TRA10692: 'Google Pay',    err_TRA10694: 'SAMSUNGPAY ',    err_TRA10695: 'Samsung Pay Payment Token ',    err_TRA10696: 'Samsung Pay',    err_TRA10697: 'SAMSUNGPAY Certificate ',    err_TRA10704: '',    err_TRA10705: '',    err_TRA20001: '',    err_TRA20004: '',    err_TRA20010: '',    err_TRA40014: 'Time_Out',    err_MEM40008: ' ( PayerEmail)',    err_MEM40012: ' (PostData_)',    err_MEM40013: 'CardHolderName  - 2-45',    err_MEM40015: 'CardHolderPhone 45',    err_MPG05002: 'Master',    err_MER10003: '',    err_NOR10001: '',    example_title: '',   tc_title: '',   tc_desc: 'Test Environment',   tc_note: '<br><span class="text-red-600 font-bold"></span>',   tc_lbl_normal: '',   tc_lbl_bonus: ''}}, 
            'EN': {name: 'English',data: {    page_title: 'NewebPay - Credit Card Background Authorization (Identity Verification) Technical Docs',    header_mobile_title: 'NewebPay Tech Docs',    sidebar_brand: 'NewebPay',    sidebar_subtitle: 'Credit Card Background Auth API',    sidebar_version_note: '(Identity Verification Ver.)',    nav_intro: 'Intro & Flow',    nav_setup: 'Prerequisites',    nav_tool: 'Online Test Tool',    nav_group_api: 'API Specs',    nav_request: 'Request Parameters',    nav_encryption: 'Encryption Details',    nav_response: 'Response Parameters',    nav_errors: 'Error Codes',    nav_example: 'Code Examples',    nav_testcards: 'Test Card Numbers',    intro_title: 'Introduction & Transaction Flow',    intro_desc: 'NewebPay provides merchants with a standalone credit card background authorization API. Consumers select the credit card payment method on the merchant\'s website and provide card details. The merchant then uses this API to send transaction data to NewebPay. Upon receiving the authorization response from the acquiring bank, the result is immediately returned to the merchant to complete the order.',    intro_flow_title: 'Transaction Flow',    intro_step_1: 'Consumers select credit card payment on the merchant website or App and provide card details for purchase.',    intro_step_2: 'The merchant initiates a transaction request to the NewebPay platform via the Background Authorization API.',    intro_step_3: 'Upon receiving the request, NewebPay sends a transaction request to the credit card acquiring institution.',    intro_step_4: 'The acquiring institution returns the transaction result to NewebPay.',    intro_step_5: 'NewebPay returns the transaction result to the merchant.',    intro_step_6: 'The merchant informs the consumer of the result via the website or App and proceeds with shipment if successful.',    setup_title: 'Integration Prerequisites',    setup_card1_title: 'Membership & Merchant',    setup_card1_desc: 'Must register as a NewebPay member, create a merchant account, and enable credit card payment tools.',    setup_card2_title: 'IP Binding (Important)',    setup_card2_desc: 'Must apply for the Background Authorization feature and bind IPs (max 6 sets).',    setup_card2_note: 'Note: Use a proxy server if you have a dynamic IP.',    setup_card3_title: 'Get Keys',    setup_card3_desc: 'Obtain <code>Hash Key</code> and <code>Hash IV</code> from the Member Area.',    setup_card4_title: 'Apple Pay (Optional)',    setup_card4_desc: 'If needed, configure certificates in [Merchant Management / Details / Apple Pay Settings].',    tool_title: 'Encryption Test Tool',    tool_intro: 'This tool helps you verify encryption results, decrypt response data, and generate CheckCodes.',    tool_tab_encrypt: 'AES Encryption (Request)',    tool_tab_decrypt: 'AES Decryption (Response)',    tool_tab_checkcode: 'Generate CheckCode',    tool_ph_key: 'Ex: AAAAvw3YlqoEk6G4HqRKDAYpHKZWxBBB',    tool_ph_iv: 'Ex: AAAACC1FplieBBBB',    tool_lbl_qs: 'Original Query String',    tool_ph_qs: 'Ex: MerchantID=MS12345678&TimeStamp=1638345756&Version=2.5...',    tool_note_urlencode: 'Please ensure the string is processed via http_build_query or urlencode',    tool_btn_encrypt: 'Encrypt to Generate PostData_',    tool_lbl_hex: 'Encryption Result (Hex String)',    tool_lbl_enc_hex: 'Encrypted String (Hex String)',    tool_ph_enc_hex: 'Ex: 0ef82edabaf8964d09992d7ec8e575f1...',    tool_btn_decrypt: 'Execute Decryption',    tool_lbl_decrypt_res: 'Decryption Result (Raw Data)',    tool_lbl_amt: 'Amt (Amount)',    tool_lbl_mid: 'MerchantID',    tool_lbl_ord: 'MerchantOrderNo',    tool_lbl_trade: 'TradeNo',    tool_btn_checkcode: 'Generate CheckCode',    tool_lbl_prehash: 'Pre-Hash String:',    tool_lbl_checkcode_res: 'CheckCode Result (SHA256 Upper)',    req_title: 'Request Parameters',    req_api_info: 'API Information',    req_url_prod: 'URL (Production)',    req_url_test: 'URL (Test)',    req_lvl1_title: 'Level 1 Parameters (HTML Form Post)',    th_param: 'Parameter',    th_name: 'Name',    th_required: 'Required',    th_type: 'Type',    th_note: 'Note',    th_desc: 'Description',    param_mid_name: 'Merchant ID',    param_mid_note: 'NewebPay Merchant ID.',    param_post_name: 'Encrypted Data',    param_post_note: 'Refer to "Encryption Rules" for methods.',    param_pos_name: 'Response Format',    param_pos_note: 'Fixed value: <code class="bg-slate-100 px-1">JSON</code>',    req_lvl2_title: 'Parameters inside PostData_ (Pre-encryption)',    p_ts_name: 'Timestamp',    p_ts_note: 'Seconds since Unix Epoch (Jan 1, 1970 00:00:00 GMT).<br>Ex: The timestamp for 2014-05-15 15:00:00 is 1400137200.',    p_ver_name: 'Version',    p_ver_note: 'Please use <code class="bg-slate-100 px-1">2.5</code>.',    p_ord_name: 'Order Number',    p_ord_note: 'Merchant defined order number. Alphanumeric and "_" allowed. Ex: 201406010001.<br>Max length: 30.<br>Must be unique within the same merchant.',    p_amt_name: 'Amount',    p_amt_note: 'Numbers only, no symbols. Ex: 1000.<br>Currency: TWD.',    p_desc_name: 'Item Description',    p_desc_note: 'Product information. UTF-8 encoded.',    p_email_name: 'Payer Email',    p_email_note: 'Must contain \'@\' and \'.\'. Ex: abc@yahoo.com.<br>Background authorization will NOT send transaction notifications to the payer; the merchant must send them.<br>This field is sent to international card organizations for verification, so it is required.<br><span class="text-red-600 font-bold">Must match the email on file for credit card application.</span>',    p_fname_name: 'Payer First Name',    p_fname_note: 'First name on file with the issuing bank. English letters, spaces, and hyphens only.',    p_lname_name: 'Payer Last Name',    p_lname_note: 'Last name on file with the issuing bank. English letters, spaces, and hyphens only.',    p_phone_name: 'Payer Phone',    p_phone_note: 'Phone number on file with the issuing bank. Numbers only.',    p_card_name: 'Card Number',    p_card_note: '16 digits. Amex: 15 digits. UnionPay: 14-19 digits.<br><span class="text-red-600">Required for Credit Card payments (non-Apple/Google Pay).</span><br>For Apple/Google Pay, leave empty.',    p_exp_name: 'Expiry Date',    p_exp_note: 'Format: yymm.<br><span class="text-red-600">Required for Credit Card payments (non-Apple/Google Pay).</span><br>For Apple/Google Pay, leave empty.',    p_inst_name: 'Installment',    p_inst_note: '0 or empty = No installment.<br>Set to the following values to enable installments:<br><code class="bg-slate-100 text-xs px-1">3</code>=3 months, <code class="bg-slate-100 text-xs px-1">6</code>=6 months, <code class="bg-slate-100 text-xs px-1">12</code>=12 months, <code class="bg-slate-100 text-xs px-1">18</code>=18 months, <code class="bg-slate-100 text-xs px-1">24</code>=24 months, <code class="bg-slate-100 text-xs px-1">30</code>=30 months',    p_red_name: 'Bonus Points',    p_red_note: 'Enable credit card bonus point redemption.<br>1 = Enable, 0 or empty = Disable',    p_ae_name: 'American Express',    p_ae_note: 'Enable American Express payment.<br>1 = Enable, 0 or empty = Disable',    p_apple_note: 'Encrypted or decrypted payment token.<br>A payment token is encrypted virtual card info provided by Apple after the buyer pays with Apple Pay.<br><span class="text-red-600">Please urlencode the payment token before adding to PostData_ for encryption.</span><br>Configure certificates in [Merchant Details]/[Apple Pay Settings] before use.',    p_google_note: 'Encrypted or decrypted payment token.<br>A payment token is encrypted virtual card info provided by Google Pay after the buyer pays with Google Pay.<br><span class="text-red-600">Please urlencode the payment token before adding to PostData_ for encryption.</span>',    p_samsung_note: 'Encrypted or decrypted payment token.<br>A payment token is encrypted virtual card info provided by Samsung Pay after the buyer pays with Samsung Pay.<br><span class="text-red-600">Please urlencode the payment token before adding to PostData_ for encryption.</span>',    enc_title: 'Encryption & Verification Rules',    enc_aes_title: 'AES Encryption Mechanism (PostData_)',    enc_aes_desc: 'To prevent leakage of sensitive data like card numbers, parameter strings must be AES encrypted using the Merchant Hash Key and Hash IV.',    enc_step1_title: 'Generate Request String',    enc_step1_desc: 'Combine all parameters in <code>http_build_query</code> format (key=value&key2=value2...).',    enc_step2_title: 'AES Encryption',    enc_step2_desc: 'Algorithm: <span class="font-bold text-red-600">AES-256-CBC</span><br>Padding: <span class="font-bold text-red-600">PKCS7</span><br>Key / IV: Use your specific Merchant Hash Key and Hash IV.',    enc_step3_title: 'Convert to Hex',    enc_step3_desc: 'Convert the encrypted binary data (Raw Data) to a Hex String (lowercase). This is your <code>PostData_</code>.',    enc_chk_title: 'CheckCode Generation Rule (Response Verification)',    enc_chk_desc: 'Used to verify the legitimacy of the returned data. Merchants can compare the returned <code>CheckCode</code> with their calculated value.',    enc_chk_s1_title: 'Sort Specific Parameters',    enc_chk_s1_desc: 'Take these four fields from the response: <code>Amt</code>, <code>MerchantID</code>, <code>MerchantOrderNo</code>, <code>TradeNo</code><br>Sort them alphabetically A~Z:<ol class="list-disc list-inside text-sm text-slate-600 ml-2 mt-1"><li><code>Amt</code></li><li><code>MerchantID</code></li><li><code>MerchantOrderNo</code></li><li><code>TradeNo</code></li></ol>',    enc_chk_s2_title: 'Concatenate Key & IV',    enc_chk_s2_desc: 'Join the sorted parameters with <code>&</code>.<br>Add <code>HashIV=YourIV&</code> at the <strong class="text-red-600">beginning</strong>.<br>Add <code>&HashKey=YourKey</code> at the <strong class="text-red-600">end</strong>.',    enc_chk_s3_title: 'SHA256 Checksum & Uppercase',    enc_chk_s3_desc: 'Perform SHA256 encryption on the concatenated string and convert the result to <strong class="text-red-600">uppercase</strong>.',    res_title: 'Response Parameters',    res_desc: 'Format is <strong>JSON</strong>. The top-level structure is:',    res_status_name: 'Status Code',    res_msg_name: 'Message',    res_msg_note: 'Transaction status description. Text after [ - ] is the bank response message.',    res_result_name: 'Details',    res_result_note: 'Array object. See table below for details.',    res_obj_title: 'Parameters inside Result Object',    res_mid_name: 'Merchant ID',    res_mid_note: 'NewebPay Merchant ID.',    res_amt_name: 'Transaction Amount',    res_amt_note: 'Authorized amount for this transaction.',    res_trade_name: 'NewebPay TradeNo',    res_trade_note: 'System transaction serial number generated by NewebPay.',    res_ord_name: 'Merchant Order No',    res_ord_note: 'Merchant defined order number.',    res_rcode_name: 'Bank Response Code',    res_rcode_note: 'Response code returned by the acquiring institution.',    res_authbank_name: 'Acquiring Bank',    res_authbank_note: 'Esun: E.Sun Bank, Taishin: Taishin Bank, CTBC: CTBC Bank, NCCC: NCCC... etc.',    res_auth_name: 'Auth Code',    res_auth_note: 'Authorization code from the acquiring bank. Returns empty if the transaction failed at authorization.',    res_adate_name: 'Auth Date',    res_adate_note: 'Format: yyyymmdd. Ex: 20140304.',    res_atime_name: 'Auth Time',    res_atime_note: 'Format: hhmmss. Ex: 164828.',    res_c6_name: 'Card First 6',    res_c6_note: 'First 6 digits of the credit card.',    res_c4_name: 'Card Last 4',    res_c4_note: 'Last 4 digits of the credit card.',    res_exp_name: 'Card Expiry',    res_exp_note: 'Format: yymm. Ex: 1912 = Dec 2019.',    res_inst_name: 'Installment Period',    res_inst_note: 'Number of installments.',    res_instf_name: 'First Installment Amt',    res_instf_note: 'Amount of the first installment.',    res_inste_name: 'Per Installment Amt',    res_inste_note: 'Amount for each subsequent installment.',    res_eci_name: 'ECI Value',    res_eci_note: 'Fixed as empty for non-3D transactions.',    res_redamt_name: 'Amt After Bonus',    res_redamt_note: 'Actual authorized amount after bonus point deduction.<br>Ex: 1000 TWD transaction, 60 TWD bonus deduction -> returns 940.<br>May be 0 or original amount if points are insufficient or deduction fails. Only returned for bonus point transactions.',    res_pm_name: 'Payment Type',    res_pm_note: 'CREDIT = Taiwan issued card, FOREIGN = Foreign card, UNIONPAY = UnionPay, GOOGLEPAY, SAMSUNGPAY, APPLEPAY... etc.',    res_ip_name: 'Transaction IP',    res_ip_note: 'IP address of the payer.',    res_escrow_name: 'Escrow Bank',    res_escrow_note: 'Bank providing performance guarantee. Returns empty if the merchant is a direct credit card merchant.<br>HNCB: Hua Nan Bank',    res_chk_name: 'CheckCode',    res_chk_note: 'Used to verify data legitimacy. Merchants should compare this field to verify the data came from NewebPay. See "Encryption & Verification Rules".',    err_title: 'Error Codes',    err_search_ph: 'Search Code (Ex: TRA10016) or Reason...',    th_err_code: 'Error Code',    th_err_reason: 'Reason / Note',    err_TRA10001: 'Failed to get merchant data. Merchant ID error.',    err_TRA10003: 'Amount format error. Must be a number > 0. Transaction exceeds single limit, please contact merchant.',    err_TRA10008: 'Data encryption/decryption error.',    err_TRA10009: 'Merchant ID cannot be empty.',    err_TRA10012: 'Merchant ID suspended.',    err_TRA10013: 'Merchant credit card qualification suspended.',    err_TRA10015: 'Network connection failed.',    err_TRA10016: 'Credit card authorization failed.',    err_TRA10036: 'RespondType format error.',    err_TRA10037: 'Merchant Order Number error.',    err_TRA10041: 'URL format error.',    err_TRA10042: 'Card number format error.',    err_TRA10043: 'Card expiry date format error.',    err_TRA10044: 'Card last 4 digits error, expiry cannot be empty.',    err_TRA10052: 'Foreign cards not allowed for this merchant.',    err_TRA10053: 'Credit card transaction unavailable, authorization quota exceeded.',    err_TRA10056: 'Issuing bank installments not provided.',    err_TRA10060: 'Foreign cards not accepted for installments.',    err_TRA10061: 'Merchant acquiring bank configuration error.',    err_TRA10061_g: 'Acquiring bank setting error.',    err_TRA10067: 'Direct authorization denied. Background authorization refused for this merchant.',    err_TRA10075: 'Failed to create transaction order.',    err_TRA10078: 'CVV (last 3 digits) check error.',    err_TRA10079: 'Card expiry date check error.',    err_TRA10091: 'Amex acquiring bank setting error. Gateway required. Please check Amex gateway settings.',    err_TRA10100C: 'CTBC installment system maintenance.',    err_TRA10100T: 'Taishin system maintenance.',    err_TRA10101T: 'Taishin bonus system maintenance.',    err_TRA10101E: 'E.Sun bonus system maintenance.',    err_TRA10100E: 'E.Sun system maintenance.',    err_TRA10102: 'Bonus redemption not provided by merchant.',    err_TRA10103: 'Bonus redemption not enabled for merchant.',    err_TRA10104: 'Installments not supported for bonus transactions.',    err_TRA10105: 'Installments not enabled for merchant.',    err_TRA10106: 'One-time payment not enabled for merchant.',    err_TRA10107: 'Transaction rejected. Reason provided.',    err_TRA10672: 'UnionPay not enabled for this Merchant ID.',    err_TRA10673: 'UnionPay not enabled for this merchant.',    err_TRA10676: 'Failed to get merchant credit card settings. Check if enabled or contact CS to confirm background auth setup. Both Test and Prod environments must be configured.',    err_TRA10681: 'Credit card transaction serial number error.',    err_TRA10682: 'This card does not support the selected installment period.',    err_TRA10683: 'No available bank installment periods found.',    err_TRA10684: 'APPLEPAY Certificate does not exist.',    err_TRA10685: 'APPLEPAY not enabled. Check payment method status in Member Area.',    err_TRA10687: 'APPLEPAY Payment Token parsing error.',    err_TRA10688: 'APPLEPAY transaction setting error.',    err_TRA10690: 'Google Pay not enabled. Check payment method status in Member Area.',    err_TRA10691: 'Google Pay Payment Token parsing error.',    err_TRA10692: 'Google Pay transaction setting error.',    err_TRA10694: 'SAMSUNGPAY not enabled. Check payment method status in Member Area.',    err_TRA10695: 'Samsung Pay Payment Token parsing error.',    err_TRA10696: 'Samsung Pay transaction setting error.',    err_TRA10697: 'SAMSUNGPAY Certificate does not exist.',    err_TRA10704: 'UnionPay not accepted for bonus transactions.',    err_TRA10705: 'UnionPay not accepted for installment transactions.',    err_TRA20001: 'Failed to add transaction data.',    err_TRA20004: 'Duplicate Merchant Order Number.',    err_TRA20010: 'Secondary payment method does not exist.',    err_TRA40014: 'Time_Out',    err_MEM40008: 'Required field cannot be empty (e.g., PayerEmail).',    err_MEM40012: 'Required data transmission error (PostData_ empty).',    err_MEM40013: 'CardHolderName length or format error. Spaces, commas, hyphens only. Length 2-45 chars.',    err_MEM40015: 'CardHolderPhone length or format error. Numbers only. Length max 45 chars.',    err_MPG05002: 'MasterCard not supported. Please use another card.',    err_MER10003: 'Merchant secondary payment settings not found.',    err_NOR10001: 'Network connection exception.',    example_title: 'Code Examples',    tc_title: 'Test Card Information',    tc_desc: 'The following card numbers are for the Test Environment only.',    tc_note: 'You can use any valid future date and any 3 digits for CVV.<br><span class="text-red-600 font-bold">Note: Transactions using real cards or other numbers will fail in the test environment.</span>',    tc_lbl_normal: 'Regular & Installment',    tc_lbl_bonus: 'Bonus Redemption'}    },             
            'KO': {name: '',data: {page_title: 'NewebPay -    (  )  ',header_mobile_title: 'NewebPay  ',sidebar_brand: 'NewebPay',sidebar_subtitle: '   API',sidebar_version_note: '(  )',nav_intro: '  ',nav_setup: '  ',nav_tool: '  ',nav_group_api: 'API ',nav_request: '  (Request)',nav_encryption: '  ',nav_response: '  (Response)',nav_errors: ' ',nav_example: ' ',nav_testcards: '  ',intro_title: '   ',intro_desc: 'NewebPay        .          ,   API     NewebPay .             .',intro_flow_title: ' ',intro_step_1: '            .',intro_step_2: '    API  NewebPay     .',intro_step_3: 'NewebPay          .',intro_step_4: '    NewebPay   .',intro_step_5: 'NewebPay       .',intro_step_6: '        ,     .',setup_title: '  ',setup_card1_title: '  ',setup_card1_desc: 'NewebPay      ,     .',setup_card2_title: 'IP  ()',setup_card2_desc: 'NewebPay     IP   ( 6).',setup_card2_note: ':  IP     .',setup_card3_title: '(Key) ',setup_card3_desc: '   <code>Hash Key</code>  <code>Hash IV</code> .',setup_card4_title: 'Apple Pay ( )',setup_card4_desc: '   [ / /Apple Pay ]  .',tool_title: '  ',tool_intro: '    ,     CheckCode  .',tool_tab_encrypt: 'AES  (Request)',tool_tab_decrypt: 'AES  (Response)',tool_tab_checkcode: 'CheckCode ',tool_ph_key: ': AAAAvw3YlqoEk6G4HqRKDAYpHKZWxBBB',tool_ph_iv: ': AAAACC1FplieBBBB',tool_lbl_qs: '   (Query String)',tool_ph_qs: ': MerchantID=MS12345678&TimeStamp=1638345756&Version=2.5...',tool_note_urlencode: ' http_build_query  urlencode  ',tool_btn_encrypt: '   PostData_ ',tool_lbl_hex: '  (Hex String)',tool_lbl_enc_hex: '  (Hex String)',tool_ph_enc_hex: ': 0ef82edabaf8964d09992d7ec8e575f1...',tool_btn_decrypt: ' ',tool_lbl_decrypt_res: '  ( )',tool_lbl_amt: 'Amt ()',tool_lbl_mid: 'MerchantID ( ID)',tool_lbl_ord: 'MerchantOrderNo ( )',tool_lbl_trade: 'TradeNo ( )',tool_btn_checkcode: 'CheckCode ',tool_lbl_prehash: '   (Pre-Hash String):',tool_lbl_checkcode_res: 'CheckCode  (SHA256 Upper)',req_title: '  (Request)',req_api_info: 'API ',req_url_prod: 'URL ( )',req_url_test: 'URL ( )',req_lvl1_title: '1  (HTML Form Post)',th_param: ' ',th_name: '',th_required: '',th_type: '',th_note: '',th_desc: '',param_mid_name: ' ID',param_mid_note: 'NewebPay  ID.',param_post_name: ' ',param_post_note: '   " " .',param_pos_name: ' ',param_pos_note: ' <code class="bg-slate-100 px-1">JSON</code> ',req_lvl2_title: 'PostData_   ( )',p_ts_name: '',p_ts_note: 'Unix Epoch (1970 1 1 00:00:00 GMT)    .<br>: 2014-05-15 15:00:00  1400137200.',p_ver_name: '',p_ver_note: '<code class="bg-slate-100 px-1">2.5</code> .',p_ord_name: ' ',p_ord_note: '   , , , "_"  . : 201406010001.<br>  30.<br>     .',p_amt_name: ' ',p_amt_note: ' ,   . : 1000.<br>: TWD ( ).',p_desc_name: ' ',p_desc_note: ' . UTF-8  .',p_email_name: ' ',p_email_note: '  \'@\'  \'.\'   . : abc@yahoo.com.<br>            .<br>           .<br><span class="text-red-600 font-bold">      .</span>',p_fname_name: '  (First Name)',p_fname_note: '     (First Name). ,   (-) .',p_lname_name: '  (Last Name)',p_lname_note: '     (Last Name). ,   (-) .',p_phone_name: ' ',p_phone_note: '   .  .',p_card_name: ' ',p_card_note: '  16.   15.  14-19.<br><span class="text-red-600"> (Apple Pay  Google Pay )  .</span><br>Apple Pay  Google Pay    ,   .',p_exp_name: ' ',p_exp_note: '  , : yymm.<br><span class="text-red-600"> (Apple Pay  Google Pay )  .</span><br>Apple Pay  Google Pay    ,   .',p_inst_name: ' ',p_inst_note: '   = 0   :  .<br>          :<br><code class="bg-slate-100 text-xs px-1">3</code>=3, <code class="bg-slate-100 text-xs px-1">6</code>=6, <code class="bg-slate-100 text-xs px-1">12</code>=12, <code class="bg-slate-100 text-xs px-1">18</code>=18, <code class="bg-slate-100 text-xs px-1">24</code>=24, <code class="bg-slate-100 text-xs px-1">30</code>=30',p_red_name: ' ',p_red_note: '     .<br>1 = , 0    = ',p_ae_name: ' ',p_ae_note: '      .<br>1 = , 0    = ',p_apple_note: '   payment token.<br>payment token    Apple Pay   Apple     .<br><span class="text-red-600">PostData_    payment token  urlencode .</span><br>Apple Pay   [ ]/[ ]/[Apple Pay ]    .',p_google_note: '   payment token.<br>payment token    Google Pay   Google Pay     .<br><span class="text-red-600">PostData_    payment token  urlencode .</span>',p_samsung_note: '   payment token.<br>payment token    Samsung Pay   Samsung Pay     .<br><span class="text-red-600">PostData_    payment token  urlencode .</span>',enc_title: '    ',enc_aes_title: 'AES   (PostData_)',enc_aes_desc: '        ,    Hash Key  Hash IV     AES   .',enc_step1_title: '  ',enc_step1_desc: '  <code>http_build_query</code> (key=value&key2=value2...) .',enc_step2_title: 'AES ',enc_step2_desc: ' : <span class="font-bold text-red-600">AES-256-CBC</span><br>  (Padding): <span class="font-bold text-red-600">PKCS7</span><br>Key / IV:   Hash Key Hash IV .',enc_step3_title: '16  (Hex)',enc_step3_desc: '  (Raw Data) Hex String() .  <code>PostData_</code>.',enc_chk_title: 'CheckCode   ( )',enc_chk_desc: '     .     <code>CheckCode</code>       .',enc_chk_s1_title: '  ',enc_chk_s1_desc: '   4 : <code>Amt</code>, <code>MerchantID</code>, <code>MerchantOrderNo</code>, <code>TradeNo</code><br>  A~Z  :<ol class="list-disc list-inside text-sm text-slate-600 ml-2 mt-1"><li><code>Amt</code></li><li><code>MerchantID</code></li><li><code>MerchantOrderNo</code></li><li><code>TradeNo</code></li></ol>',enc_chk_s2_title: 'Key IV ',enc_chk_s2_desc: '  <code>&</code> .<br> <strong class="text-red-600"> </strong> <code>HashIV=IV&</code> <br> <strong class="text-red-600"> </strong> <code>&HashKey=Key</code> .',enc_chk_s3_title: 'SHA256    ',enc_chk_s3_desc: '  SHA256 ,  <strong class="text-red-600"></strong> .',res_title: '  (Response)',res_desc: '  <strong>JSON</strong>.    :',res_status_name: ' ',res_msg_name: '',res_msg_note: '  , [ - ]    .',res_result_name: ' ',res_result_note: 'Array ,     ',res_obj_title: 'Result   ',res_mid_name: ' ID',res_mid_note: 'NewebPay  ID.',res_amt_name: ' ',res_amt_note: '   .',res_trade_name: 'NewebPay  ',res_trade_note: 'NewebPay     .',res_ord_name: '  ',res_ord_note: '   .',res_rcode_name: '   ',res_rcode_note: '    .',res_authbank_name: '  ',res_authbank_note: 'Esun: E.Sun , Taishin: Taishin , CTBC: CTBC , NCCC:   ... ',res_auth_name: ' ',res_auth_note: '    .            .',res_adate_name: ' ',res_adate_note: ': yyyymmdd, : 20140304.',res_atime_name: ' ',res_atime_note: ': hhmmss, : 164828.',res_c6_name: '   6',res_c6_note: '   6.',res_c4_name: '   4',res_c4_note: '   4.',res_exp_name: '  ',res_exp_note: ': yymm,  1912=2019 12.',res_inst_name: ' ',res_inst_note: '   .',res_instf_name: '   ',res_instf_note: '     .',res_inste_name: '  ',res_inste_note: '    .',res_eci_name: 'ECI ',res_eci_note: ' 3D     ',res_redamt_name: '   ',res_redamt_note: '      .<br>: 1000 ,   60       940.<br>      0    .        .',res_pm_name: ' ',res_pm_note: 'CREDIT =   , FOREIGN =  , UNIONPAY = (), GOOGLEPAY, SAMSUNGPAY, APPLEPAY... ',res_ip_name: ' IP',res_ip_note: '   IP.',res_escrow_name: ' ',res_escrow_note: '    .               .<br>HNCB',res_chk_name: '  (CheckCode)',res_chk_note: '     .        NewebPay      .   "    " .',err_title: ' ',err_search_ph: '  (: TRA10016)   ...',th_err_code: ' ',th_err_reason: '  / ',err_TRA10001: '   ,  ID ',err_TRA10003: '  ,    0  .    ,  .',err_TRA10008: ' / ',err_TRA10009: ' ID   .',err_TRA10012: ' ID  ',err_TRA10013: '   ',err_TRA10015: '  ',err_TRA10016: '  ',err_TRA10036: 'RespondType    ',err_TRA10037: '   ',err_TRA10041: 'URL  ',err_TRA10042: '   ',err_TRA10043: '    ',err_TRA10044: '  4  ,     ',err_TRA10052: '      .',err_TRA10053: '       .    ',err_TRA10056: '    ',err_TRA10060: '     .',err_TRA10061: '    ',err_TRA10061_g: '   ',err_TRA10067: '    ,     ',err_TRA10075: '   ',err_TRA10078: '   3(CVV)  ',err_TRA10079: '    ',err_TRA10091: '      , (NCCC) Gateway  .        .',err_TRA10100C: 'CTBC    ',err_TRA10100T: 'Taishin   ',err_TRA10101T: 'Taishin    ',err_TRA10101E: 'E.Sun    ',err_TRA10100E: 'E.Sun   ',err_TRA10102: '     ',err_TRA10103: '     ',err_TRA10104: '     ',err_TRA10105: '     ',err_TRA10106: '    ',err_TRA10107: ' ,   ',err_TRA10672: '  MID     ',err_TRA10673: '     ',err_TRA10676: '     .             .                .',err_TRA10681: '   ',err_TRA10682: '       .',err_TRA10683: '         .',err_TRA10684: 'APPLEPAY Certificate  ',err_TRA10685: ' APPLEPAY   ,         .',err_TRA10687: 'APPLEPAY Payment Token  ',err_TRA10688: 'APPLEPAY   ',err_TRA10690: ' Google Pay   ,         .',err_TRA10691: 'Google Pay Payment Token  ',err_TRA10692: 'Google Pay   ',err_TRA10694: ' SAMSUNGPAY   ,         .',err_TRA10695: 'Samsung Pay Payment Token  ',err_TRA10696: 'Samsung Pay   ',err_TRA10697: 'SAMSUNGPAY Certificate  ',err_TRA10704: '    ',err_TRA10705: '    ',err_TRA20001: '   ',err_TRA20004: '   ',err_TRA20010: '   ',err_TRA40014: 'Time_Out ( )',err_MEM40008: '      (: PayerEmail).',err_MEM40012: '     (PostData_  )',err_MEM40013: 'CardHolderName      , ,    -  ,  2-45 .',err_MEM40015: 'CardHolderPhone      ,  ,  45 .',err_MPG05002: '  Master    .    .',err_MER10003: '   PG     ',err_NOR10001: '  ',example_title: ' ',tc_title: '    ',tc_desc: '    (Test Environment)  .',tc_note: '        3    .<br><span class="text-red-600 font-bold">:         .</span>',tc_lbl_normal: '   ',tc_lbl_bonus: ' '}},                                     
        };

        // Error Codes Definition (Single Source for Table Generation)
        const errorCodes = [
            'TRA10001', 'TRA10003', 'TRA10008', 'TRA10009', 'TRA10012', 'TRA10013', 'TRA10015', 'TRA10016', 
            'TRA10036', 'TRA10037', 'TRA10041', 'TRA10042', 'TRA10043', 'TRA10044', 'TRA10052', 'TRA10053', 
            'TRA10056', 'TRA10060', 'TRA10061', 'TRA10061_g', 'TRA10067', 'TRA10075', 'TRA10078', 'TRA10079', 
            'TRA10091', 'TRA10100C', 'TRA10100T', 'TRA10101T', 'TRA10101E', 'TRA10100E', 'TRA10102', 'TRA10103', 
            'TRA10104', 'TRA10105', 'TRA10106', 'TRA10107', 'TRA10672', 'TRA10673', 'TRA10676', 'TRA10681', 
            'TRA10682', 'TRA10683', 'TRA10684', 'TRA10685', 'TRA10687', 'TRA10688', 'TRA10690', 'TRA10691', 
            'TRA10692', 'TRA10694', 'TRA10695', 'TRA10696', 'TRA10697', 'TRA10704', 'TRA10705', 'TRA20001', 
            'TRA20004', 'TRA20010', 'TRA40014', 'MEM40008', 'MEM40012', 'MEM40013', 'MEM40015', 'MPG05002', 
            'MER10003', 'NOR10001'
        ];

        // Code Examples Data
        const codeExamples = {
            php: `<?php
// 1. Set Merchant and Transaction Data
$hashKey    = "YourHashKey"; // Please fill in your HashKey
$hashIV     = "YourHashIV";  // Please fill in your HashIV
$merchantID = "MS12345678";  // Merchant ID
// Production API URL
$apiUrl     = "https://core.newebpay.com/API/CreditCard/withIdentity";
// Test API URL
// $apiUrl     = "https://ccore.newebpay.com/API/CreditCard/withIdentity";

// 2. Prepare Transaction Parameters Array
$tradeParams = [
    'MerchantID'          => $merchantID,
    'TimeStamp'           => time(),
    'Version'             => '2.5',
    'MerchantOrderNo'     => 'ORD_' . time(),
    'Amt'                 => '1000',
    'ProdDesc'            => 'Sample Product',
    'PayerEmail'          => 'customer@example.com', 
    'CardHolderFirstName' => 'John',
    'CardHolderLastName'  => 'Doe',
    'CardHolderPhone'     => '0912345678', // Optional
    'CardNo'              => '4000221111111111',
    'Exp'                 => '2812',
];

// 3. Generate Query String
$dataString = http_build_query($tradeParams);

// 4. AES-256-CBC Encryption
$encrypted = openssl_encrypt(
    $dataString, 
    'AES-256-CBC', 
    $hashKey, 
    OPENSSL_RAW_DATA, 
    $hashIV
);
$postData = bin2hex($encrypted);
?>

<form method="post" action="<?php echo $apiUrl; ?>">
    <input type="hidden" name="MerchantID_" value="<?php echo $merchantID; ?>">
    <input type="hidden" name="PostData_" value="<?php echo $postData; ?>">
    <input type="hidden" name="Pos_" value="JSON">
    <input type="submit" value="">
</form>`,
            nodejs: `const crypto = require('crypto');
const querystring = require('querystring');
const axios = require('axios'); // Requires axios

// 1. Set Data
const hashKey = 'YourHashKey';
const hashIV  = 'YourHashIV';
const merchantID = 'MS12345678';
// Production Environment
const apiUrl = 'https://core.newebpay.com/API/CreditCard/withIdentity';
// Test Environment
// const apiUrl = 'https://ccore.newebpay.com/API/CreditCard/withIdentity';

// 2. Prepare Parameters
const params = {
    MerchantID: merchantID,
    TimeStamp: Math.floor(Date.now() / 1000),
    Version: '2.5',
    MerchantOrderNo: 'ORD_' + Date.now(),
    Amt: '1000',
    ProdDesc: 'Sample Product',
    PayerEmail: 'customer@example.com',
    CardHolderFirstName: 'John',
    CardHolderLastName: 'Doe',
    CardHolderPhone: '0912345678', // Optional
    CardNo: '4000221111111111',
    Exp: '2812'
};

// 3. Convert to Query String
const dataString = querystring.stringify(params);

// 4. AES Encryption
const cipher = crypto.createCipheriv('aes-256-cbc', hashKey, hashIV);
let encrypted = cipher.update(dataString, 'utf8', 'hex');
encrypted += cipher.final('hex');

// 5. Send POST Request
axios.post(apiUrl, querystring.stringify({
    MerchantID_: merchantID,
    PostData_: encrypted,
    Pos_: 'JSON'
}), {
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
}).then(res => {
    console.log(res.data);
}).catch(err => {
    console.error(err);
});`,
            python: `import time
import urllib.parse
import requests
from Crypto.Cipher import AES # pip install pycryptodome
from Crypto.Util.Padding import pad
import binascii

# 1. Set Data
hash_key = b'YourHashKey' # Must be bytes
hash_iv  = b'YourHashIV'  # Must be bytes
merchant_id = 'MS12345678'
# Production Environment
api_url = 'https://core.newebpay.com/API/CreditCard/withIdentity'
# Test Environment
# api_url = 'https://ccore.newebpay.com/API/CreditCard/withIdentity'

# 2. Prepare Parameters
params = {
    'MerchantID': merchant_id,
    'TimeStamp': int(time.time()),
    'Version': '2.5',
    'MerchantOrderNo': f'ORD_{int(time.time())}',
    'Amt': '1000',
    'ProdDesc': 'Sample Product',
    'PayerEmail': 'customer@example.com',
    'CardHolderFirstName': 'John',
    'CardHolderLastName': 'Doe',
    'CardHolderPhone': '0912345678', # Optional
    'CardNo': '4000221111111111',
    'Exp': '2812'
}

# 3. Convert to Query String
data_string = urllib.parse.urlencode(params)

# 4. AES Encryption
cipher = AES.new(hash_key, AES.MODE_CBC, hash_iv)
encrypted_bytes = cipher.encrypt(pad(data_string.encode('utf-8'), AES.block_size))
post_data = binascii.hexlify(encrypted_bytes).decode('utf-8')

# 5. Send POST Request
payload = {
    'MerchantID_': merchant_id,
    'PostData_': post_data,
    'Pos_': 'JSON'
}
response = requests.post(api_url, data=payload)
print(response.json())`,
            csharp: `using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Http;
using System.Security.Cryptography;
using System.Text;
using System.Web; // System.Web

public class Program
{
    public static async Task Main()
    {
        string hashKey = "YourHashKey";
        string hashIV = "YourHashIV";
        string merchantID = "MS12345678";
        // Production Environment
        string apiUrl = "https://core.newebpay.com/API/CreditCard/withIdentity";
        // Test Environment
        // string apiUrl = "https://ccore.newebpay.com/API/CreditCard/withIdentity";

        // Prepare Parameters
        var paramsDict = new Dictionary<string, string>
        {
            { "MerchantID", merchantID },
            { "TimeStamp", DateTimeOffset.Now.ToUnixTimeSeconds().ToString() },
            { "Version", "2.5" },
            { "MerchantOrderNo", "ORD_" + DateTimeOffset.Now.ToUnixTimeSeconds() },
            { "Amt", "1000" },
            { "ProdDesc", "Sample Product" },
            { "PayerEmail", "customer@example.com" },
            { "CardHolderFirstName", "John" },
            { "CardHolderLastName", "Doe" },
            { "CardHolderPhone", "0912345678" }, // Optional
            { "CardNo", "4000221111111111" },
            { "Exp", "2812" }
        };

        // Convert to Query String
        string dataString = string.Join("&", paramsDict.Select(p => $"{p.Key}={HttpUtility.UrlEncode(p.Value)}"));

        // Encryption
        string postData = EncryptAES256(dataString, hashKey, hashIV);

        // Send Request
        using (var client = new HttpClient())
        {
            var content = new FormUrlEncodedContent(new[]
            {
                new KeyValuePair<string, string>("MerchantID_", merchantID),
                new KeyValuePair<string, string>("PostData_", postData),
                new KeyValuePair<string, string>("Pos_", "JSON")
            });

            var response = await client.PostAsync(apiUrl, content);
            string result = await response.Content.ReadAsStringAsync();
            Console.WriteLine(result);
        }
    }

    public static string EncryptAES256(string source, string key, string iv)
    {
        byte[] sourceBytes = Encoding.UTF8.GetBytes(source);
        using (var aes = Aes.Create())
        {
            aes.Mode = CipherMode.CBC;
            aes.Padding = PaddingMode.PKCS7;
            aes.Key = Encoding.UTF8.GetBytes(key);
            aes.IV = Encoding.UTF8.GetBytes(iv);

            using (var encryptor = aes.CreateEncryptor())
            {
                byte[] encryptedBytes = encryptor.TransformFinalBlock(sourceBytes, 0, sourceBytes.Length);
                return BitConverter.ToString(encryptedBytes).Replace("-", "").ToLower();
            }
        }
    }
}`
        };

        function applyTranslations(lang = 'zh-TW') {
            const data = langData[lang]?.data;
            if (!data) return;

            // Handle Text Content
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (data[key]) {
                    el.innerHTML = data[key]; // Use innerHTML to support <b>, <code> tags in translation
                }
            });

            // Handle Placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (data[key]) {
                    el.setAttribute('placeholder', data[key]);
                }
            });
        }

        // Modified: Generate Dropdown Options dynamically
        function initLangDropdown() {
            const select = document.getElementById('lang-select');
            const languages = Object.keys(langData);
            
            if (languages.length === 0) return;

            select.innerHTML = '';
            languages.forEach(langKey => {
                const option = document.createElement('option');
                option.value = langKey;
                option.textContent = langData[langKey].name;
                select.appendChild(option);
            });
        }

        // Modified: Change Language based on selection
        function changeLang(targetLang) {
            applyTranslations(targetLang);
        }

        // Generate Error Table Rows Dynamically
        function renderErrorTable() {
            const tbody = document.querySelector('#errorTable tbody');
            if (!tbody) return;
            
            // Clear existing
            tbody.innerHTML = '';

            // Generate HTML
            const html = errorCodes.map(code => {
                const i18nKey = `err_${code}`;
                return `<tr>
                    <td class="px-6 py-2 font-bold text-red-600">${code}</td>
                    <td class="px-6 py-2" data-i18n="${i18nKey}"></td>
                </tr>`;
            }).join('');

            tbody.innerHTML = html;
        }

        // Init: Load PHP by default and Apply Translations
        window.onload = function() {
            initLangDropdown(); // 
            renderErrorTable(); // 

            // ---  URL  ---
            const urlParams = new URLSearchParams(window.location.search);
            const getLang = urlParams.get('lang');

            //  ( langData ) 'zh-TW'
            const targetLang = (getLang && langData[getLang]) ? getLang : 'zh-TW';

            // 
            applyTranslations(targetLang);
    
            // 
            const langSelect = document.getElementById('lang-select');
            if(langSelect) {
                langSelect.value = targetLang;
            }
            // -----------------------------

            loadCode('php');
        };

        // Code Tab Switching
        function switchTab(lang, event) {
            // UI State
            document.querySelectorAll('#example .tab-btn').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
            
            // Load Content
            loadCode(lang);
        }

        // Helper: Inject Code
        function loadCode(lang) {
            const display = document.getElementById('code-display');
            // Just set the value for the textarea
            display.value = codeExamples[lang];
        }

        // Tool Tab Switching
        function switchToolTab(tabId) {
            // Hide all contents
            document.querySelectorAll('.tool-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tool-content').forEach(el => el.classList.remove('active'));
            // Reset all buttons
            document.querySelectorAll('.tool-tab-btn').forEach(el => {
                el.classList.remove('active', 'border-purple-600', 'text-purple-600');
                el.classList.add('border-transparent', 'text-slate-500');
            });

            // Show current
            const targetContent = document.getElementById(tabId);
            targetContent.classList.remove('hidden');
            targetContent.classList.add('active');

            // Highlight button
            const btn = event.currentTarget;
            btn.classList.remove('border-transparent', 'text-slate-500');
            btn.classList.add('active', 'border-purple-600', 'text-purple-600');
        }

        // Mobile Sidebar
        const menuBtn = document.getElementById('menu-btn');
        const sidebar = document.getElementById('sidebar');
        let isMenuOpen = false;

        menuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            sidebar.classList.toggle('-translate-x-full');
        });

        // Search
        const searchInput = document.getElementById('errorSearch');
        // Need to update selector to dynamically query rows after generation
        searchInput.addEventListener('keyup', (e) => {
            const term = e.target.value.toLowerCase();
            const tableRows = document.querySelectorAll('#errorTable tbody tr'); // Re-query DOM
            
            tableRows.forEach(row => {
                const code = row.children[0].textContent.toLowerCase();
                const msg = row.children[1].textContent.toLowerCase();
                if (code.includes(term) || msg.includes(term)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });

        // ------------------
        // Encryption Tools
        // ------------------

        function getKeys() {
            const key = document.getElementById('toolKey').value.trim();
            const iv = document.getElementById('toolIv').value.trim();
            if (!key || !iv) {
                alert(' Hash Key  Hash IV');
                return null;
            }
            return { key, iv };
        }

        function runEncrypt() {
            const keys = getKeys();
            if (!keys) return;
            const data = document.getElementById('encryptInput').value.trim();
            if (!data) return alert('');

            try {
                const keyHex = CryptoJS.enc.Utf8.parse(keys.key);
                const ivHex = CryptoJS.enc.Utf8.parse(keys.iv);

                const encrypted = CryptoJS.AES.encrypt(data, keyHex, {
                    iv: ivHex,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });

                // Output Hex
                document.getElementById('encryptOutput').value = encrypted.ciphertext.toString(CryptoJS.enc.Hex);
            } catch (e) {
                console.error(e);
                alert(': ' + e.message);
            }
        }

        function runDecrypt() {
            const keys = getKeys();
            if (!keys) return;
            const hexStr = document.getElementById('decryptInput').value.trim();
            if (!hexStr) return alert(' Hex ');

            try {
                const keyHex = CryptoJS.enc.Utf8.parse(keys.key);
                const ivHex = CryptoJS.enc.Utf8.parse(keys.iv);
                
                // Convert Hex string to CipherParams
                const encryptedHex = CryptoJS.enc.Hex.parse(hexStr);
                const encryptedBase64 = CryptoJS.enc.Base64.stringify(encryptedHex);

                const decrypted = CryptoJS.AES.decrypt(encryptedBase64, keyHex, {
                    iv: ivHex,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });

                document.getElementById('decryptOutput').value = decrypted.toString(CryptoJS.enc.Utf8);
            } catch (e) {
                console.error(e);
                alert(' Key/IV ');
            }
        }

        function runCheckCode() {
            const keys = getKeys();
            if (!keys) return;

            const amt = document.getElementById('ccAmt').value.trim();
            const mid = document.getElementById('ccMid').value.trim();
            const ord = document.getElementById('ccOrd').value.trim();
            const trade = document.getElementById('ccTrade').value.trim();

            if (!amt || !mid || !ord || !trade) {
                alert(' CheckCode ');
                return;
            }
            
            const list = [
                { key: 'Amt', val: amt },
                { key: 'MerchantID', val: mid },
                { key: 'MerchantOrderNo', val: ord },
                { key: 'TradeNo', val: trade }
            ];
            
            // Sort by key
            list.sort((a, b) => a.key.localeCompare(b.key));

            // 2. Build String
            let str = list.map(item => `${item.key}=${item.val}`).join('&');

            // 3. Add IV front, Key back
            const preHash = `HashIV=${keys.iv}&${str}&HashKey=${keys.key}`;
            
            // Display pre-hash for debugging
            document.getElementById('ccPreHash').textContent = preHash;

            // 4. SHA256 + Upper
            const hash = CryptoJS.SHA256(preHash).toString(CryptoJS.enc.Hex).toUpperCase();
            document.getElementById('ccOutput').value = hash;
        }

        // Scroll Spy (Fixed Logic)
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            let current = '';

            // 1. Standard Offset Check
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= (sectionTop - 200)) { // Adjusted offset
                    current = section.getAttribute('id');
                }
            });

            // 2. Bottom of Page Check (Force select the last item if at bottom)
            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 50) {
                 if (sections.length > 0) {
                     current = sections[sections.length - 1].getAttribute('id');
                 }
            }

            // 3. Update Active Class
            navLinks.forEach(link => {
                link.classList.remove('sidebar-active');
                // Use strict match for anchor link
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('sidebar-active');
                }
            });
        });
    </script>
</body>
</html>