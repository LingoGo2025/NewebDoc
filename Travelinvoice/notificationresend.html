<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page_title"></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="shortcut icon" href="https://www.travelinvoice.com.tw/images/image/travelInvoice.ico" type="image/x-icon" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        html { scroll-behavior: smooth; }
        body { background-color: #f8fafc; color: #334155; }
        
        /* Custom Scrollbar */
        .scrollable-area::-webkit-scrollbar { width: 6px; }
        .scrollable-area::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 3px; }
        
        /* Navigation Active State */
        .sidebar-active { background-color: #e0f2fe; color: #0284c7; border-right: 4px solid #0284c7; font-weight: 600; }
        
        /* Tabs */
        .tab-btn { border-bottom: 2px solid transparent; transition: all 0.3s; }
        .tab-btn:hover { color: #60a5fa; }
        .tab-btn.active { border-bottom-color: #3b82f6; color: #3b82f6; font-weight: 600; background-color: rgba(59, 130, 246, 0.05); }
        
        /* Table Styles */
        .params-table th { background-color: #f1f5f9; color: #475569; font-weight: 700; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 0.05em; white-space: nowrap; }
        .params-table td { vertical-align: top; color: #334155; border-bottom: 1px solid #e2e8f0; }
        .params-table tr:hover { background-color: #f8fafc; }
        .required-badge { background-color: #dcfce7; color: #166534; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 700; border: 1px solid #bbf7d0; }
        .optional-badge { background-color: #f1f5f9; color: #64748b; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; border: 1px solid #e2e8f0; }
        .cond-badge { background-color: #fef9c3; color: #854d0e; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 700; border: 1px solid #fde047; }

        /* Tool styles */
        .tool-tab-btn { transition: all 0.2s; }
        .tool-tab-btn.active { border-bottom-color: #9333ea; color: #9333ea; background-color: #faf5ff; }
        
        /* Code block */
        pre { margin: 0; }
    </style>
</head>
<body class="text-slate-800 font-sans">

    <!-- Mobile Header -->
    <header class="lg:hidden bg-white shadow-sm p-4 sticky top-0 z-50 flex justify-between items-center border-b border-slate-200">
        <h1 class="text-lg font-bold text-blue-700 flex items-center">
            <i class="fas fa-paper-plane mr-2"></i> <span data-i18n="header_mobile_title"></span>
        </h1>
        <button id="menu-btn" class="text-slate-600 focus:outline-none hover:text-blue-600 transition">
            <i class="fas fa-bars text-2xl"></i>
        </button>
    </header>

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside id="sidebar" class="fixed inset-y-0 left-0 w-72 bg-white shadow-xl transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 border-r border-slate-200 flex flex-col">
            
            <!-- Top Section -->
            <div class="p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-white shrink-0">
                <h2 class="text-2xl font-bold text-blue-700 tracking-tight" data-i18n="sidebar_brand"></h2>
                <p class="text-sm text-slate-500 mt-1 font-medium"><span data-i18n="sidebar_subtitle"></span><br><span class="text-xs text-slate-400" data-i18n="sidebar_version"></span></p>
            </div>

            <!-- Scrollable Navigation Area -->
            <div class="flex-1 overflow-y-auto scrollable-area">
                <nav class="p-4 space-y-1">
                    <a href="#intro" class="nav-link block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-info-circle w-5 group-hover:text-blue-500 transition-colors mr-2"></i> <span data-i18n="nav_intro"></span>
                    </a>
                    <a href="#setup" class="nav-link block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-cogs w-5 group-hover:text-blue-500 transition-colors mr-2"></i> <span data-i18n="nav_setup"></span>
                    </a>
                    <a href="#tool" class="nav-link block px-4 py-2 text-sm text-purple-700 bg-purple-50 hover:bg-purple-100 hover:text-purple-800 rounded-lg transition-colors group border border-purple-100 mb-4 shadow-sm">
                        <i class="fas fa-wrench w-5 group-hover:text-purple-600 transition-colors mr-2"></i> <span data-i18n="nav_tool"></span>
                    </a>

                    <div class="px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider mt-4" data-i18n="nav_group_func"></div>
                    
                    <a href="#api_notification_resend" class="nav-link block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-envelope-open-text w-5 group-hover:text-blue-500 transition-colors mr-2"></i> <span data-i18n="nav_resend"></span>
                    </a>

                    <div class="px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider mt-4" data-i18n="nav_group_appendix"></div>

                    <a href="#errors" class="nav-link block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-exclamation-triangle w-5 group-hover:text-blue-500 transition-colors mr-2"></i> <span data-i18n="nav_errors"></span>
                    </a>
                    <a href="#example" class="nav-link block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors group">
                        <i class="fas fa-code w-5 group-hover:text-blue-500 transition-colors mr-2"></i> <span data-i18n="nav_example"></span>
                    </a>
                </nav>
            </div>

            <!-- Footer with Language Switcher -->
            <div class="p-4 border-t border-slate-200 bg-slate-50 shrink-0">
                <div class="relative group w-full">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-slate-400">
                        <i class="fas fa-globe"></i>
                    </div>
                    <select id="lang-select" onchange="changeLang(this.value)" class="w-full appearance-none bg-white hover:bg-white text-slate-600 font-medium py-2.5 pl-10 pr-8 rounded-lg text-sm transition-all focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer border border-slate-300 hover:border-blue-400 shadow-sm">
                        <!-- Options injected by JS -->
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500 group-hover:text-slate-700">
                        <i class="fas fa-chevron-up text-xs"></i>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 lg:ml-72 p-4 lg:p-8 w-[95%] mx-auto max-w-[1920px]">
            
            <!-- Intro -->
            <section id="intro" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h1 class="text-3xl font-bold text-slate-900" data-i18n="intro_title"></h1>
                </div>
                
                <div class="bg-white p-6 lg:p-8 rounded-xl shadow-sm border border-slate-200">
                    <p class="text-slate-700 leading-relaxed mb-6 text-lg" data-i18n="intro_desc"></p>
                    
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                        <span class="bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center text-sm mr-2"><i class="fas fa-list-ul"></i></span> 
                        <span data-i18n="intro_funcs_title"></span>
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex items-start">
                            <i class="fas fa-envelope text-2xl text-green-600 mt-1 mr-4"></i>
                            <div>
                                <h4 class="font-bold text-slate-700" data-i18n="usecase_1_title"></h4>
                                <p class="text-sm text-slate-500 mt-1" data-i18n="usecase_1_desc"></p>
                            </div>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex items-start">
                            <i class="fas fa-filter text-2xl text-blue-500 mt-1 mr-4"></i>
                            <div>
                                <h4 class="font-bold text-slate-700" data-i18n="usecase_2_title"></h4>
                                <p class="text-sm text-slate-500 mt-1" data-i18n="usecase_2_desc"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Setup -->
            <section id="setup" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="setup_title"></h2>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div class="p-4 bg-slate-50 rounded-lg border border-slate-100">
                            <h3 class="font-bold text-slate-800 mb-2 flex items-center"><i class="fas fa-key text-blue-500 mr-2"></i> <span data-i18n="setup_card1_title"></span></h3>
                            <p class="text-sm text-slate-600" data-i18n="setup_card1_desc"></p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-100">
                            <h3 class="font-bold text-slate-800 mb-2 flex items-center"><i class="fas fa-network-wired text-blue-500 mr-2"></i> <span data-i18n="setup_card2_title"></span></h3>
                            <p class="text-sm text-slate-600" data-i18n="setup_card2_desc"></p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tool -->
             <section id="tool" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-purple-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="tool_title"></h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-md border border-purple-100 overflow-hidden">
                    <div class="bg-purple-50 p-4 border-b border-purple-100">
                        <p class="text-purple-800 text-sm" data-i18n="tool_intro"></p>
                    </div>

                    <div class="flex border-b border-slate-200">
                        <button onclick="switchToolTab('aes-encrypt')" class="tool-tab-btn active flex-1 py-4 text-sm font-bold text-center hover:bg-slate-50 transition border-b-2 border-purple-600 text-purple-600">
                            <i class="fas fa-lock mr-2"></i> <span data-i18n="tool_tab_encrypt"></span>
                        </button>
                        <button onclick="switchToolTab('aes-decrypt')" class="tool-tab-btn flex-1 py-4 text-sm font-bold text-center hover:bg-slate-50 transition border-b-2 border-transparent text-slate-500">
                            <i class="fas fa-unlock mr-2"></i> <span data-i18n="tool_tab_decrypt"></span>
                        </button>
                        <button onclick="switchToolTab('check-code')" class="tool-tab-btn flex-1 py-4 text-sm font-bold text-center hover:bg-slate-50 transition border-b-2 border-transparent text-slate-500">
                            <i class="fas fa-check-double mr-2"></i> <span data-i18n="tool_tab_checkcode"></span>
                        </button>
                    </div>

                    <div class="p-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 pb-6 border-b border-slate-100">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Hash Key (32 bytes)</label>
                                <input type="text" id="toolKey" data-i18n-placeholder="tool_ph_key" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm bg-slate-50">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Hash IV (16 bytes)</label>
                                <input type="text" id="toolIv" data-i18n-placeholder="tool_ph_iv" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm bg-slate-50">
                            </div>
                        </div>

                        <div id="aes-encrypt" class="tool-content active">
                            <div class="mb-4">
                                <label class="block text-sm font-bold text-slate-700 mb-2" data-i18n="tool_lbl_qs"></label>
                                <textarea id="encryptInput" rows="5" data-i18n-placeholder="tool_ph_qs" class="w-full p-3 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm text-slate-600"></textarea>
                                <p class="text-xs text-slate-400 mt-1 text-right" data-i18n="tool_note_qs"></p>
                            </div>
                            <button onclick="runEncrypt()" class="bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700 transition shadow-sm font-bold text-sm">
                                <i class="fas fa-arrow-down mr-1"></i> <span data-i18n="tool_btn_encrypt"></span>
                            </button>
                            <div class="mt-4">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="tool_lbl_hex"></label>
                                <div class="relative">
                                    <textarea id="encryptOutput" readonly rows="3" class="w-full p-3 bg-slate-800 text-green-400 rounded font-mono text-sm border-none focus:ring-0"></textarea>
                                </div>
                            </div>
                        </div>

                        <div id="aes-decrypt" class="tool-content hidden">
                             <div class="mb-4">
                                <label class="block text-sm font-bold text-slate-700 mb-2" data-i18n="tool_lbl_enc_hex"></label>
                                <textarea id="decryptInput" rows="4" data-i18n-placeholder="tool_ph_enc_hex" class="w-full p-3 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm text-slate-600"></textarea>
                            </div>
                            <button onclick="runDecrypt()" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition shadow-sm font-bold text-sm">
                                <i class="fas fa-arrow-down mr-1"></i> <span data-i18n="tool_btn_decrypt"></span>
                            </button>
                            <div class="mt-4">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="tool_lbl_decrypt_res"></label>
                                <div class="relative">
                                    <textarea id="decryptOutput" readonly rows="3" class="w-full p-3 bg-slate-800 text-green-400 rounded font-mono text-sm border-none focus:ring-0"></textarea>
                                </div>
                            </div>
                        </div>

                        <div id="check-code" class="tool-content hidden">
                            <p class="text-sm text-slate-600 mb-4 bg-yellow-50 p-2 border border-yellow-100 rounded" data-i18n="tool_cc_desc"></p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-sm font-bold text-slate-700 mb-1" data-i18n="tool_lbl_cc_mid"></label>
                                    <input type="text" id="cc_mid" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-700 mb-1" data-i18n="tool_lbl_cc_invtrans"></label>
                                    <input type="text" id="cc_invtrans" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-700 mb-1" data-i18n="tool_lbl_cc_mord"></label>
                                    <input type="text" id="cc_mord" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-700 mb-1" data-i18n="tool_lbl_cc_rand"></label>
                                    <input type="text" id="cc_rand" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-slate-700 mb-1" data-i18n="tool_lbl_cc_amt"></label>
                                    <input type="text" id="cc_amt" class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-purple-500 font-mono text-sm">
                                </div>
                            </div>
                            <button onclick="runCheckCode()" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 transition shadow-sm font-bold text-sm">
                                <i class="fas fa-calculator mr-1"></i> <span data-i18n="tool_btn_checkcode"></span>
                            </button>
                            <div class="mt-4">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="tool_lbl_checkcode_res"></label>
                                <div class="relative">
                                    <textarea id="checkCodeOutput" readonly rows="2" class="w-full p-3 bg-slate-800 text-yellow-400 rounded font-mono text-sm border-none focus:ring-0"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Rule Explanation Section -->
                        <div class="mt-6 border-t border-slate-200 pt-6">
                            <h3 class="font-bold text-slate-800 mb-4 flex items-center">
                                <i class="fas fa-book-open text-purple-600 mr-2"></i> <span data-i18n="tool_rule_title"></span>
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- AES Block -->
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                                    <h4 class="font-bold text-slate-700 mb-2 border-b border-slate-200 pb-2" data-i18n="tool_rule_aes_title"></h4>
                                    <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                                        <li data-i18n="tool_rule_aes_1"></li>
                                        <li data-i18n="tool_rule_aes_2"></li>
                                        <li data-i18n="tool_rule_aes_3"></li>
                                        <li data-i18n="tool_rule_aes_4"></li>
                                    </ul>
                                </div>
                                <!-- CheckCode Block -->
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                                     <h4 class="font-bold text-slate-700 mb-2 border-b border-slate-200 pb-2" data-i18n="tool_rule_chk_title"></h4>
                                     <ol class="list-decimal list-inside text-sm text-slate-600 space-y-1">
                                        <li data-i18n="tool_rule_chk_1"></li>
                                        <li data-i18n="tool_rule_chk_2"></li>
                                        <li class="break-all" data-i18n="tool_rule_chk_3"></li>
                                        <li data-i18n="tool_rule_chk_4"></li>
                                     </ol>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

             <!-- API Template Generator -->
             <div id="api-container"></div>

             <!-- Errors -->
             <section id="errors" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="err_title"></h2>
                </div>
                
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-4">
                    <div class="relative">
                        <i class="fas fa-search absolute left-4 top-3.5 text-slate-400"></i>
                        <input type="text" id="errorSearch" data-i18n-placeholder="err_ph" class="w-full pl-10 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>
                <div class="overflow-x-auto bg-white rounded-xl shadow-sm border border-slate-200 max-h-[600px] overflow-y-auto">
                    <table class="w-full text-left text-sm" id="errorTable">
                        <thead class="bg-slate-50 text-slate-600 uppercase font-bold sticky top-0 border-b border-slate-200 shadow-sm">
                            <tr>
                                <th class="px-6 py-4 w-1/4" data-i18n="th_err_code"></th>
                                <th class="px-6 py-4" data-i18n="th_err_reason"></th>
                                <th class="px-6 py-4" data-i18n="th_err_note"></th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200 font-mono text-slate-700">
                             <!-- Dynamic Generation -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Example -->
            <section id="example" class="mb-12 scroll-mt-24">
                <div class="flex items-center mb-6">
                    <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                    <h2 class="text-2xl font-bold text-slate-900" data-i18n="example_title"></h2>
                </div>
                
                <div class="bg-slate-800 rounded-lg shadow-lg overflow-hidden relative">
                    <div class="flex border-b border-slate-600 bg-slate-900 px-2">
                        <button onclick="switchTab('php', event)" class="tab-btn active px-6 py-3 text-sm font-medium text-slate-300 hover:text-white transition-colors">PHP</button>
                        <button onclick="switchTab('nodejs', event)" class="tab-btn px-6 py-3 text-sm font-medium text-slate-300 hover:text-white transition-colors">Node.js</button>
                        <button onclick="switchTab('python', event)" class="tab-btn px-6 py-3 text-sm font-medium text-slate-300 hover:text-white transition-colors">Python</button>
                        <button onclick="switchTab('csharp', event)" class="tab-btn px-6 py-3 text-sm font-medium text-slate-300 hover:text-white transition-colors">C# (.NET)</button>
                    </div>

                    <textarea id="code-display" readonly class="w-full h-[600px] p-4 bg-[#272822] text-[#f8f8f2] font-mono text-sm leading-6 border-none outline-none resize-none"></textarea>
                </div>
            </section>

        </main>
    </div>

    <script>
        // --- Multi-language Data (Only zh-TW retained) ---
        const langData = {
            'zh-TW': {name: '繁體中文',data: {    page_title: '電子收據通知信補發 API 文件',    header_mobile_title: '通知信補發 API',    sidebar_brand: 'TRINVI',    sidebar_subtitle: '電子收據加值服務平台',    sidebar_version: '通知信補發 V1.0.2',    nav_intro: '簡介與功能',    nav_setup: '串接前置準備',    nav_tool: '加密測試工具',    nav_group_func: '補發作業',    nav_resend: '通知信補發',    nav_group_appendix: '附錄',    nav_errors: '錯誤代碼表',    nav_example: '範例程式碼',    intro_title: '簡介與功能',    intro_desc: '提供旅行商業同業公會旗下會員，透過程式串接方式，來進行通知信補發。此API以發信類型(MailType)來區分要補發收據開立、作廢單或折讓單，並須指定要補發的EMAIL信箱來達成通知信補發目的。本平台未提供媒體申報之相關機制與作業，旅行社請自行進行相關作業。',    intro_funcs_title: '主要功能',    usecase_1_title: '補發各類通知',    usecase_1_desc: '支援開立信、作廢信、折讓信的補發作業。',    usecase_2_title: '多信箱支援',    usecase_2_desc: '可指定多個收件人信箱(用逗號分隔)，確保客戶能收到通知。',    setup_title: '串接前置準備',    setup_card1_title: '取得金鑰',    setup_card1_desc: '須登入電子收據平台後台取得商店代號 (MerchantID) 以及對應的 Hash Key 與 Hash IV。',    setup_card2_title: '確認網址',    setup_card2_desc: '<span class="block mb-1"><b>測試環境:</b> <code class="text-blue-600">https://capi.travelinvoice.com.tw/notification_resend</code></span><span class="block"><b>正式環境:</b> <code class="text-green-600">https://api.travelinvoice.com.tw/notification_resend</code></span>',    tool_title: '加密測試工具',    tool_intro: '此工具可協助您產生 PostData_ 加密字串，或依據規則產生 CheckCode。',    tool_tab_encrypt: 'PostData 加密',    tool_tab_decrypt: 'PostData 解密',    tool_tab_checkcode: 'CheckCode 產生',    tool_ph_key: '例如: abcdefghijklmnopqrstuvwxyzabcdef (32 bytes)',    tool_ph_iv: '例如: 1234567890123456 (16 bytes)',    tool_lbl_qs: '原始字串 (Query String 格式)',    tool_ph_qs: '例如: Version=1.0&TimeStamp=1588320000&MailType=1&InvoiceNumber=T13671008&BuyerEmail=test@travelinvoice.com.tw',    tool_note_qs: '請確保輸入格式為 Key=Value&Key2=Value2',    tool_btn_encrypt: '執行加密 (AES-256-CBC)',    tool_lbl_hex: 'PostData 加密結果 (Hex)',    tool_lbl_enc_hex: '加密字串 (Hex String)',    tool_ph_enc_hex: '例如: 2aab1c3b6ec7ee38c05921c478c3e24cb2d54e99c94b5536e2d0767e7588cf7620ce512a9d57a688f7cf7a3b9786f38d900299248cd2d0c83a1c950b486e02cf9edd67e37ee8e5185795934f69cacd4f21c9a369b245ddeed0b198a24cbce577b53ffff13bbd88acc505f88609c3d35b76f0716e9c22e0f7b5e5c5edc21e09c2',    tool_btn_decrypt: '執行解密',    tool_lbl_decrypt_res: '解密結果',    tool_btn_checkcode: '產生 CheckCode',    tool_lbl_checkcode_res: 'CheckCode 結果',    tool_lbl_cc_mid: 'MerchantID (旅行社統一編號)',    tool_lbl_cc_invtrans: 'InvoiceTransNo (平台開立序號)',    tool_lbl_cc_mord: 'MerchantOrderNo (自訂編號)',    tool_lbl_cc_rand: 'RandomNum (防偽隨機碼)',    tool_lbl_cc_amt: 'TotalAmt (收據金額)',    tool_cc_desc: '將 MerchantID, InvoiceTransNo, MerchantOrderNo, RandomNum, TotalAmt 依照 A-Z 排序後串接，前後加上 HashIV 與 HashKey 進行 SHA256 加密。',    tool_rule_title: '加密與檢查碼運算規則說明',    tool_rule_aes_title: 'AES 加密規則 (PostData_)',    tool_rule_aes_1: '演算法: AES-256-CBC',    tool_rule_aes_2: 'Padding: PKCS7 (部分語言需手動補位)',    tool_rule_aes_3: '轉換: 將參數組合成 Query String 後加密',    tool_rule_aes_4: '輸出: 轉為 Hex String (不分大小寫)',    tool_rule_chk_title: 'CheckCode 產生規則 ',    tool_rule_chk_1: '排序: 將指定欄位依英文字母 A-Z 順序排列',    tool_rule_chk_2: '串接: 轉為 Query String (Key=Value&...)',    tool_rule_chk_3: '頭尾: HashIV=...&...&HashKey=...',    tool_rule_chk_4: '運算: SHA256 雜湊後轉大寫',    err_title: '錯誤代碼表',    err_ph: '搜尋代碼或原因...',    th_err_code: '錯誤代碼',    th_err_reason: '錯誤原因',    th_err_note: '備註',    example_title: '範例程式碼',    lbl_api_url_test: 'URL (測試環境)',    lbl_api_url_prod: 'URL (正式環境)',    lbl_lvl1_title: '第一層參數 (HTTP Post)',    lbl_lvl2_req_title: 'PostData_ 內含參數 (請求)',    lbl_lvl2_res_title: 'Response 回應參數 (String)',    th_param: '參數名稱',    th_name: '中文名稱',    th_required: '必填',    th_type: '型態',    th_note: '備註',    th_len: '長度',    val_yes: '是',    val_no: '否',    val_cond: '條件',    api_resend_title: '通知信補發',    p_mid_name: '旅行社統一編號', p_mid_note: '旅行社統一編號。',    p_postdata_name: '加密資料', p_postdata_note: '相關加密方法請參考 加密測試工具中說明 。',    p_ver_name: '串接程式版本', p_ver_note: '固定帶 1.0。',    p_ts_name: '時間戳記', p_ts_note: '自從Unix 纪元（格林威治時間 1970 年 1 月 1 日 00:00:00）到當前時間的秒數，若以php程式語言為例，即為呼叫time()函式所回傳的值。例：2014-05-15 15:00:00這個時間的時間戳記為1400137200。',    p_mailtype_name: '發信類型', p_mailtype_note: '依據所需發信的類型，給予對應參數。1=開立信,2=折讓3=作廢',    p_inum_name: '收據號碼', p_inum_note: '此次查詢的收據號碼。',    p_sysno_name: '折讓、作廢流水號', p_sysno_note: '此次補發信的折讓單號或作廢單號。若MailType為2或3才需傳入',    p_bemail_name: '收件人Email', p_bemail_note: '此次補發信的Mail信箱，可用半型逗號區隔多信箱。',    r_status_name: '回傳狀態', r_status_note: '1. 補發信成功，則回傳SUCCESS。2. 補發信失敗，則回傳錯誤代碼。',    r_msg_name: '回傳訊息', r_msg_note: '文字，敘述此次狀態。',    r_chk_name: '檢查碼', r_chk_note: '用來檢查此次資料回傳的合法性。',    r_end_name: '字串結尾', r_end_note: '固定回傳 ##，使用String方式接收資料的用戶，須多判斷 EndStr=##，確保資料傳遞完整。',    err_KEY10001: '非旅行社API串接IP', err_note_KEY10001: '',    err_KEY10002: '資料解密錯誤', err_note_KEY10002: '',    err_KEY10003: '版本錯誤', err_note_KEY10003: '',    err_KEY10004: '資料不齊全', err_note_KEY10004: '',    err_KEY10009: '旅行社統一編號回傳失敗', err_note_KEY10009: '請確認MerchantID_ 參數拼寫',    err_KEY10010: '旅行社統一編號空白', err_note_KEY10010: '請檢查MerchantID_欄位',    err_KEY10011: 'PostData_欄位空白', err_note_KEY10011: '',    err_KEY10012: '資料傳遞錯誤', err_note_KEY10012: '請再次確認參數拼寫與格式',    err_KEY10013: '資料空白', err_note_KEY10013: '',    err_KEY10014: '作業逾時', err_note_KEY10014: '通常泛指 I/O 上的time out',    err_KEY10019: '旅行社統編錯誤 / 旅行社已被停權', err_note_KEY10019: '',    err_NOR10001: '網路連線異常', err_note_NOR10001: '',    err_INV70001: '欄位資料格式錯誤', err_note_INV70001: '',    err_SM10001: '發信種類錯誤', err_note_SM10001: '請檢查MailType欄位',    err_SM10002: '通知信信箱錯誤', err_note_SM10002: '請檢查BuyerEmail欄位',    err_BS10006: '查無收據資料', err_note_BS10006: '',    err_BS10015: '折讓單號未填寫', err_note_BS10015: '',    err_BS10016: '作廢單號未填寫', err_note_BS10016: '',    err_BS10017: '查無折讓單資料', err_note_BS10017: '',    err_BS10018: '查無作廢單資料', err_note_BS10018: ''}            },
            'EN': {name: 'English',data: {    page_title: 'E-Receipt Notification Resend API Documentation',    header_mobile_title: 'Notification Resend API',    sidebar_brand: 'TRINVI',    sidebar_subtitle: 'E-Receipt Value-Added Platform',    sidebar_version: 'Resend V1.0.2',    nav_intro: 'Introduction & Features',    nav_setup: 'Prerequisites',    nav_tool: 'Encryption Tool',    nav_group_func: 'Resend Operations',    nav_resend: 'Resend Notification',    nav_group_appendix: 'Appendix',    nav_errors: 'Error Codes',    nav_example: 'Code Examples',    intro_title: 'Introduction & Features',    intro_desc: 'Provides members of the Travel Industry Association with the ability to resend notification emails via API integration. This API uses MailType to distinguish between Receipt Issuance, Void Notes, or Allowance Notes, and requires specifying the recipient\'s EMAIL address to complete the resend process. Note: This platform does not provide media declaration mechanisms; travel agencies must handle related operations themselves.',    intro_funcs_title: 'Key Features',    usecase_1_title: 'Resend Various Notifications',    usecase_1_desc: 'Supports resending emails for Issuance, Voiding, and Allowances.',    usecase_2_title: 'Multi-Recipient Support',    usecase_2_desc: 'Allows specifying multiple recipient email addresses (separated by commas) to ensure clients receive notifications.',    setup_title: 'Integration Prerequisites',    setup_card1_title: 'Get Keys',    setup_card1_desc: 'You must log in to the E-Receipt Platform backend to obtain the MerchantID and the corresponding Hash Key and Hash IV.',    setup_card2_title: 'Confirm URLs',    setup_card2_desc: '<span class="block mb-1"><b>Test Env:</b> <code class="text-blue-600">https://capi.travelinvoice.com.tw/notification_resend</code></span><span class="block"><b>Prod Env:</b> <code class="text-green-600">https://api.travelinvoice.com.tw/notification_resend</code></span>',    tool_title: 'Encryption Test Tool',    tool_intro: 'This tool helps you generate PostData_ encrypted strings or generate CheckCode based on rules.',    tool_tab_encrypt: 'PostData Encryption',    tool_tab_decrypt: 'PostData Decryption',    tool_tab_checkcode: 'Generate CheckCode',    tool_ph_key: 'Ex: abcdefghijklmnopqrstuvwxyzabcdef (32 bytes)',    tool_ph_iv: 'Ex: 1234567890123456 (16 bytes)',    tool_lbl_qs: 'Original String (Query String Format)',    tool_ph_qs: 'Ex: Version=1.0&TimeStamp=1588320000&MailType=1&InvoiceNumber=T13671008&BuyerEmail=test@travelinvoice.com.tw',    tool_note_qs: 'Ensure format is Key=Value&Key2=Value2',    tool_btn_encrypt: 'Encrypt (AES-256-CBC)',    tool_lbl_hex: 'PostData Encrypted Result (Hex)',    tool_lbl_enc_hex: 'Encrypted String (Hex String)',    tool_ph_enc_hex: 'Ex: 2aab1c3b6ec7ee38c05921c478c3e24cb2d54e99c94b5536e2d0767e7588cf7620ce512a9d57a688f7cf7a3b9786f38d900299248cd2d0c83a1c950b486e02cf9edd67e37ee8e5185795934f69cacd4f21c9a369b245ddeed0b198a24cbce577b53ffff13bbd88acc505f88609c3d35b76f0716e9c22e0f7b5e5c5edc21e09c2',    tool_btn_decrypt: 'Decrypt',    tool_lbl_decrypt_res: 'Decrypted Result',    tool_btn_checkcode: 'Generate CheckCode',    tool_lbl_checkcode_res: 'CheckCode Result',    tool_lbl_cc_mid: 'MerchantID (Travel Agency Tax ID)',    tool_lbl_cc_invtrans: 'InvoiceTransNo (Platform Serial No.)',    tool_lbl_cc_mord: 'MerchantOrderNo (Custom ID)',    tool_lbl_cc_rand: 'RandomNum (Random Code)',    tool_lbl_cc_amt: 'TotalAmt (Receipt Amount)',    tool_cc_desc: 'Sort MerchantID, InvoiceTransNo, MerchantOrderNo, RandomNum, and TotalAmt alphabetically (A-Z), concatenate them, add HashIV and HashKey to the ends, and then encrypt using SHA256.',    tool_rule_title: 'Encryption & Check Code Rules',    tool_rule_aes_title: 'AES Encryption Rules (PostData_)',    tool_rule_aes_1: 'Algorithm: AES-256-CBC',    tool_rule_aes_2: 'Padding: PKCS7 (Manual padding required in some languages)',    tool_rule_aes_3: 'Transformation: Combine parameters into a Query String then encrypt',    tool_rule_aes_4: 'Output: Convert to Hex String (Case insensitive)',    tool_rule_chk_title: 'CheckCode Generation Rules',    tool_rule_chk_1: 'Sort: Arrange specified fields alphabetically (A-Z)',    tool_rule_chk_2: 'Concatenate: Convert to Query String (Key=Value&...)',    tool_rule_chk_3: 'Head/Tail: HashIV=...&...&HashKey=...',    tool_rule_chk_4: 'Operation: SHA256 Hash converted to Uppercase',    err_title: 'Error Code Table',    err_ph: 'Search code or reason...',    th_err_code: 'Error Code',    th_err_reason: 'Reason',    th_err_note: 'Note',    example_title: 'Code Examples',    lbl_api_url_test: 'URL (Test Env)',    lbl_api_url_prod: 'URL (Prod Env)',    lbl_lvl1_title: 'Level 1 Parameters (HTTP Post)',    lbl_lvl2_req_title: 'Parameters in PostData_ (Request)',    lbl_lvl2_res_title: 'Response Parameters (String)',    th_param: 'Parameter',    th_name: 'Name',    th_required: 'Required',    th_type: 'Type',    th_note: 'Note',    th_len: 'Length',    val_yes: 'Yes',    val_no: 'No',    val_cond: 'Conditional',    api_resend_title: 'Resend Notification',    p_mid_name: 'Travel Agency Tax ID', p_mid_note: 'Travel Agency Unified Business Number.',    p_postdata_name: 'Encrypted Data', p_postdata_note: 'Please refer to the Encryption Tool section for methods.',    p_ver_name: 'Program Version', p_ver_note: 'Fixed value: 1.0.',    p_ts_name: 'Timestamp', p_ts_note: 'Seconds since Unix Epoch (Jan 1, 1970 00:00:00 GMT). In PHP, use the time() function. Ex: Timestamp for 2014-05-15 15:00:00 is 1400137200.',    p_mailtype_name: 'Mail Type', p_mailtype_note: 'Parameter corresponding to the type of email to send. 1=Issuance, 2=Allowance, 3=Void',    p_inum_name: 'Receipt Number', p_inum_note: 'The receipt number for this query.',    p_sysno_name: 'Allowance/Void Serial No.', p_sysno_note: 'The system serial number for the allowance or void note. Required only if MailType is 2 or 3.',    p_bemail_name: 'Recipient Email', p_bemail_note: 'Email address(es) for this resend. Use commas to separate multiple emails.',    r_status_name: 'Return Status', r_status_note: '1. Returns SUCCESS if resend is successful. 2. Returns error code if failed.',    r_msg_name: 'Return Message', r_msg_note: 'Text description of the status.',    r_chk_name: 'Check Code', r_chk_note: 'Used to verify the legitimacy of the returned data.',    r_end_name: 'String End', r_end_note: 'Fixed return ##. Users receiving data as String must check for EndStr=## to ensure data completeness.',    err_KEY10001: 'Non-Travel Agency API IP', err_note_KEY10001: '',    err_KEY10002: 'Data Decryption Error', err_note_KEY10002: '',    err_KEY10003: 'Version Error', err_note_KEY10003: '',    err_KEY10004: 'Incomplete Data', err_note_KEY10004: '',    err_KEY10009: 'Travel Agency Tax ID Return Failed', err_note_KEY10009: 'Check spelling of MerchantID_ parameter.',    err_KEY10010: 'Tax ID is Empty', err_note_KEY10010: 'Check MerchantID_ field.',    err_KEY10011: 'PostData_ Field is Empty', err_note_KEY10011: '',    err_KEY10012: 'Data Transmission Error', err_note_KEY10012: 'Recheck parameter spelling and format.',    err_KEY10013: 'Data is Empty', err_note_KEY10013: '',    err_KEY10014: 'Operation Timeout', err_note_KEY10014: 'Usually refers to I/O timeout.',    err_KEY10019: 'Tax ID Error / Account Suspended', err_note_KEY10019: '',    err_NOR10001: 'Network Connection Error', err_note_NOR10001: '',    err_INV70001: 'Field Data Format Error', err_note_INV70001: '',    err_SM10001: 'Mail Type Error', err_note_SM10001: 'Check MailType field.',    err_SM10002: 'Notification Email Error', err_note_SM10002: 'Check BuyerEmail field.',    err_BS10006: 'No Receipt Data Found', err_note_BS10006: '',    err_BS10015: 'Allowance No. Not Filled', err_note_BS10015: '',    err_BS10016: 'Void No. Not Filled', err_note_BS10016: '',    err_BS10017: 'No Allowance Data Found', err_note_BS10017: '',    err_BS10018: 'No Void Data Found', err_note_BS10018: ''}            },        
            'SV': {name: 'Svenska',data: {    page_title: 'API-dokumentation för återutsändning av e-kvittonotifieringar',    header_mobile_title: 'API för återutsändning av notifieringar',    sidebar_brand: 'TRINVI',    sidebar_subtitle: 'Mervärdesplattform för e-kvitton',    sidebar_version: 'Återutsändning V1.0.2',    nav_intro: 'Introduktion och funktioner',    nav_setup: 'Förutsättningar',    nav_tool: 'Krypteringsverktyg',    nav_group_func: 'Återutsändningsoperationer',    nav_resend: 'Skicka notifiering igen',    nav_group_appendix: 'Bilaga',    nav_errors: 'Felkoder',    nav_example: 'Kodexempel',    intro_title: 'Introduktion och funktioner',    intro_desc: 'Ger medlemmar i resebranschföreningen möjlighet att skicka om notifieringsmail via API-integration. Detta API använder MailType för att skilja mellan kvittoutfärdande, makuleringsnotor eller rabattnotor, och kräver att mottagarens E-POST-adress anges för att slutföra återutsändningsprocessen. Obs: Denna plattform tillhandahåller inte mekanismer för mediedeklaration; resebyråer måste hantera relaterade operationer själva.',    intro_funcs_title: 'Nyckelfunktioner',    usecase_1_title: 'Skicka om olika notifieringar',    usecase_1_desc: 'Stöder återutsändning av e-post för utfärdande, makulering och rabatter.',    usecase_2_title: 'Stöd för flera mottagare',    usecase_2_desc: 'Tillåter att ange flera e-postadresser till mottagare (separerade med kommatecken) för att säkerställa att kunderna får notifieringar.',    setup_title: 'Förutsättningar för integration',    setup_card1_title: 'Hämta nycklar',    setup_card1_desc: 'Du måste logga in på e-kvittoplattformens backend för att få MerchantID och motsvarande Hash Key och Hash IV.',    setup_card2_title: 'Bekräfta URL:er',    setup_card2_desc: '<span class="block mb-1"><b>Testmiljö:</b> <code class="text-blue-600">https://capi.travelinvoice.com.tw/notification_resend</code></span><span class="block"><b>Prod-miljö:</b> <code class="text-green-600">https://api.travelinvoice.com.tw/notification_resend</code></span>',    tool_title: 'Testverktyg för kryptering',    tool_intro: 'Detta verktyg hjälper dig att generera den krypterade strängen PostData_ eller generera CheckCode baserat på regler.',    tool_tab_encrypt: 'PostData-kryptering',    tool_tab_decrypt: 'PostData-dekryptering',    tool_tab_checkcode: 'Generera CheckCode',    tool_ph_key: 'T.ex.: abcdefghijklmnopqrstuvwxyzabcdef (32 bytes)',    tool_ph_iv: 'T.ex.: 1234567890123456 (16 bytes)',    tool_lbl_qs: 'Ursprunglig sträng (Query String-format)',    tool_ph_qs: 'T.ex.: Version=1.0&TimeStamp=1588320000&MailType=1&InvoiceNumber=T13671008&BuyerEmail=test@travelinvoice.com.tw',    tool_note_qs: 'Se till att formatet är Key=Value&Key2=Value2',    tool_btn_encrypt: 'Kryptera (AES-256-CBC)',    tool_lbl_hex: 'PostData krypterat resultat (Hex)',    tool_lbl_enc_hex: 'Krypterad sträng (Hex String)',    tool_ph_enc_hex: 'T.ex.: 2aab1c3b6ec7ee38c05921c478c3e24cb2d54e99c94b5536e2d0767e7588cf7620ce512a9d57a688f7cf7a3b9786f38d900299248cd2d0c83a1c950b486e02cf9edd67e37ee8e5185795934f69cacd4f21c9a369b245ddeed0b198a24cbce577b53ffff13bbd88acc505f88609c3d35b76f0716e9c22e0f7b5e5c5edc21e09c2',    tool_btn_decrypt: 'Dekryptera',    tool_lbl_decrypt_res: 'Dekrypterat resultat',    tool_btn_checkcode: 'Generera CheckCode',    tool_lbl_checkcode_res: 'CheckCode Resultat',    tool_lbl_cc_mid: 'MerchantID (Resebyråns skatte-ID)',    tool_lbl_cc_invtrans: 'InvoiceTransNo (Plattformens serienr)',    tool_lbl_cc_mord: 'MerchantOrderNo (Anpassat ID)',    tool_lbl_cc_rand: 'RandomNum (Slumpkod)',    tool_lbl_cc_amt: 'TotalAmt (Kvittobelopp)',    tool_cc_desc: 'Sortera MerchantID, InvoiceTransNo, MerchantOrderNo, RandomNum och TotalAmt alfabetiskt (A-Ö), sammanfoga dem, lägg till HashIV och HashKey i ändarna och kryptera sedan med SHA256.',    tool_rule_title: 'Regler för kryptering och kontrollkod',    tool_rule_aes_title: 'Regler för AES-kryptering (PostData_)',    tool_rule_aes_1: 'Algoritm: AES-256-CBC',    tool_rule_aes_2: 'Padding: PKCS7 (Manuell padding krävs i vissa språk)',    tool_rule_aes_3: 'Omvandling: Kombinera parametrar till en Query String och kryptera sedan',    tool_rule_aes_4: 'Utdata: Konvertera till Hex String (Skiftlägesokänslig)',    tool_rule_chk_title: 'Regler för generering av CheckCode',    tool_rule_chk_1: 'Sortera: Ordna angivna fält alfabetiskt (A-Ö)',    tool_rule_chk_2: 'Sammanfoga: Konvertera till Query String (Key=Value&...)',    tool_rule_chk_3: 'Huvud/Svans: HashIV=...&...&HashKey=...',    tool_rule_chk_4: 'Operation: SHA256-hash konverterad till versaler',    err_title: 'Felkodstabell',    err_ph: 'Sök kod eller orsak...',    th_err_code: 'Felkod',    th_err_reason: 'Orsak',    th_err_note: 'Notering',    example_title: 'Kodexempel',    lbl_api_url_test: 'URL (Testmiljö)',    lbl_api_url_prod: 'URL (Prod-miljö)',    lbl_lvl1_title: 'Nivå 1 Parametrar (HTTP Post)',    lbl_lvl2_req_title: 'Parametrar i PostData_ (Förfrågan)',    lbl_lvl2_res_title: 'Svarsparametrar (String)',    th_param: 'Parameter',    th_name: 'Namn',    th_required: 'Obligatorisk',    th_type: 'Typ',    th_note: 'Notering',    th_len: 'Längd',    val_yes: 'Ja',    val_no: 'Nej',    val_cond: 'Villkorlig',    api_resend_title: 'Skicka notifiering igen',    p_mid_name: 'Resebyråns skatte-ID', p_mid_note: 'Resebyråns enhetliga företagsnummer.',    p_postdata_name: 'Krypterade data', p_postdata_note: 'Se avsnittet Krypteringsverktyg för metoder.',    p_ver_name: 'Programversion', p_ver_note: 'Fast värde: 1.0.',    p_ts_name: 'Tidsstämpel', p_ts_note: 'Sekunder sedan Unix Epoch (1 jan 1970 00:00:00 GMT). I PHP, använd funktionen time(). T.ex.: Tidsstämpel för 2014-05-15 15:00:00 är 1400137200.',    p_mailtype_name: 'Mailtyp', p_mailtype_note: 'Parameter som motsvarar typen av e-post som ska skickas. 1=Utfärdande, 2=Rabatt, 3=Makulering',    p_inum_name: 'Kvittonummer', p_inum_note: 'Kvittonumret för denna sökning.',    p_sysno_name: 'Rabatt/Makulerings-serienr', p_sysno_note: 'Systemets serienummer för rabatt- eller makuleringsnotan. Krävs endast om MailType är 2 eller 3.',    p_bemail_name: 'Mottagarens e-post', p_bemail_note: 'E-postadress(er) för denna återutsändning. Använd kommatecken för att separera flera e-postadresser.',    r_status_name: 'Returstatus', r_status_note: '1. Returnerar SUCCESS om återutsändningen lyckades. 2. Returnerar felkod om den misslyckades.',    r_msg_name: 'Returmeddelande', r_msg_note: 'Textbeskrivning av statusen.',    r_chk_name: 'Kontrollkod', r_chk_note: 'Används för att verifiera legitimiteten hos de returnerade data.',    r_end_name: 'Strängslut', r_end_note: 'Fast retur ##. Användare som tar emot data som String måste kontrollera EndStr=## för att säkerställa att data är fullständiga.',    err_KEY10001: 'Ej resebyrå-API-IP', err_note_KEY10001: '',    err_KEY10002: 'Fel vid datadekryptering', err_note_KEY10002: '',    err_KEY10003: 'Versionsfel', err_note_KEY10003: '',    err_KEY10004: 'Ofullständiga data', err_note_KEY10004: '',    err_KEY10009: 'Misslyckades att returnera resebyråns skatte-ID', err_note_KEY10009: 'Kontrollera stavningen av parametern MerchantID_.',    err_KEY10010: 'Skatte-ID är tomt', err_note_KEY10010: 'Kontrollera fältet MerchantID_.',    err_KEY10011: 'Fältet PostData_ är tomt', err_note_KEY10011: '',    err_KEY10012: 'Dataöverföringsfel', err_note_KEY10012: 'Kontrollera parameterstavning och format igen.',    err_KEY10013: 'Data är tomt', err_note_KEY10013: '',    err_KEY10014: 'Operationstidsgräns', err_note_KEY10014: 'Avser vanligtvis I/O-timeout.',    err_KEY10019: 'Fel på skatte-ID / Konto avstängt', err_note_KEY10019: '',    err_NOR10001: 'Nätverksanslutningsfel', err_note_NOR10001: '',    err_INV70001: 'Formatfel i fältdata', err_note_INV70001: '',    err_SM10001: 'Fel på mailtyp', err_note_SM10001: 'Kontrollera fältet MailType.',    err_SM10002: 'Fel på notifierings-e-post', err_note_SM10002: 'Kontrollera fältet BuyerEmail.',    err_BS10006: 'Inga kvittodata hittades', err_note_BS10006: '',    err_BS10015: 'Rabattnummer ej ifyllt', err_note_BS10015: '',    err_BS10016: 'Makuleringsnummer ej ifyllt', err_note_BS10016: '',    err_BS10017: 'Inga rabattdata hittades', err_note_BS10017: '',    err_BS10018: 'Inga makuleringsdata hittades', err_note_BS10018: ''}            },        
            'JP': {name: '日本語',data: {    page_title: '電子領収書通知メール再送APIドキュメント',    header_mobile_title: '通知メール再送API',    sidebar_brand: 'TRINVI',    sidebar_subtitle: '電子領収書付加価値サービスプラットフォーム',    sidebar_version: '再送 V1.0.2',    nav_intro: 'はじめにと機能',    nav_setup: '連携の準備',    nav_tool: '暗号化テストツール',    nav_group_func: '再送操作',    nav_resend: '通知メール再送',    nav_group_appendix: '付録',    nav_errors: 'エラーコード表',    nav_example: 'コード例',    intro_title: 'はじめにと機能',    intro_desc: '旅行業協会の会員がAPI連携を通じて通知メールを再送できるようにします。このAPIは、メールタイプ（MailType）を使用して領収書発行、無効伝票、または値引伝票の通知を区別し、再送プロセスを完了するために受信者のメールアドレスを指定する必要があります。注：このプラットフォームはメディア申告メカニズムを提供していません。旅行会社は関連する業務を自身で行う必要があります。',    intro_funcs_title: '主な機能',    usecase_1_title: '各種通知の再送',    usecase_1_desc: '発行、無効、および値引メールの再送をサポートします。',    usecase_2_title: '複数受信者サポート',    usecase_2_desc: '複数の受信者メールアドレス（カンマ区切り）を指定して、顧客が通知を確実に受け取れるようにします。',    setup_title: '連携の準備',    setup_card1_title: 'キーの取得',    setup_card1_desc: '電子領収書プラットフォームの管理画面にログインして、加盟店ID（MerchantID）および対応するHash KeyとHash IVを取得する必要があります。',    setup_card2_title: 'URLの確認',    setup_card2_desc: '<span class="block mb-1"><b>テスト環境:</b> <code class="text-blue-600">https://capi.travelinvoice.com.tw/notification_resend</code></span><span class="block"><b>本番環境:</b> <code class="text-green-600">https://api.travelinvoice.com.tw/notification_resend</code></span>',    tool_title: '暗号化テストツール',    tool_intro: 'このツールは、PostData_暗号化文字列の生成、またはルールに基づいたCheckCodeの生成を支援します。',    tool_tab_encrypt: 'PostData暗号化',    tool_tab_decrypt: 'PostData復号化',    tool_tab_checkcode: 'CheckCode生成',    tool_ph_key: '例: abcdefghijklmnopqrstuvwxyzabcdef (32 bytes)',    tool_ph_iv: '例: 1234567890123456 (16 bytes)',    tool_lbl_qs: '元の文字列 (Query String形式)',    tool_ph_qs: '例: Version=1.0&TimeStamp=1588320000&MailType=1&InvoiceNumber=T13671008&BuyerEmail=test@travelinvoice.com.tw',    tool_note_qs: '形式がKey=Value&Key2=Value2であることを確認してください',    tool_btn_encrypt: '暗号化実行 (AES-256-CBC)',    tool_lbl_hex: 'PostData暗号化結果 (Hex)',    tool_lbl_enc_hex: '暗号化文字列 (Hex String)',    tool_ph_enc_hex: '例: 2aab1c3b6ec7ee38c05921c478c3e24cb2d54e99c94b5536e2d0767e7588cf7620ce512a9d57a688f7cf7a3b9786f38d900299248cd2d0c83a1c950b486e02cf9edd67e37ee8e5185795934f69cacd4f21c9a369b245ddeed0b198a24cbce577b53ffff13bbd88acc505f88609c3d35b76f0716e9c22e0f7b5e5c5edc21e09c2',    tool_btn_decrypt: '復号化実行',    tool_lbl_decrypt_res: '復号化結果',    tool_btn_checkcode: 'CheckCode生成',    tool_lbl_checkcode_res: 'CheckCode結果',    tool_lbl_cc_mid: 'MerchantID (旅行会社統一番号)',    tool_lbl_cc_invtrans: 'InvoiceTransNo (プラットフォームシリアル番号)',    tool_lbl_cc_mord: 'MerchantOrderNo (カスタムID)',    tool_lbl_cc_rand: 'RandomNum (ランダムコード)',    tool_lbl_cc_amt: 'TotalAmt (領収書金額)',    tool_cc_desc: 'MerchantID、InvoiceTransNo、MerchantOrderNo、RandomNum、TotalAmtをアルファベット順（A-Z）にソートして連結し、両端にHashIVとHashKeyを追加して、SHA256で暗号化します。',    tool_rule_title: '暗号化とチェックコードの計算ルール説明',    tool_rule_aes_title: 'AES暗号化ルール (PostData_)',    tool_rule_aes_1: 'アルゴリズム: AES-256-CBC',    tool_rule_aes_2: 'パディング: PKCS7 (一部の言語では手動パディングが必要)',    tool_rule_aes_3: '変換: パラメータをQuery Stringに組み合わせてから暗号化',    tool_rule_aes_4: '出力: Hex Stringに変換 (大文字小文字を区別しない)',    tool_rule_chk_title: 'CheckCode生成ルール',    tool_rule_chk_1: 'ソート: 指定されたフィールドをアルファベット順（A-Z）に並べ替え',    tool_rule_chk_2: '連結: Query String (Key=Value&...) に変換',    tool_rule_chk_3: '先頭と末尾: HashIV=...&...&HashKey=...',    tool_rule_chk_4: '計算: SHA256ハッシュ後、大文字に変換',    err_title: 'エラーコード表',    err_ph: 'コードまたは理由を検索...',    th_err_code: 'エラーコード',    th_err_reason: 'エラー理由',    th_err_note: '備考',    example_title: 'コード例',    lbl_api_url_test: 'URL (テスト環境)',    lbl_api_url_prod: 'URL (本番環境)',    lbl_lvl1_title: '第一階層パラメータ (HTTP Post)',    lbl_lvl2_req_title: 'PostData_ 内包パラメータ (リクエスト)',    lbl_lvl2_res_title: 'Response 応答パラメータ (String)',    th_param: 'パラメータ名',    th_name: '名称',    th_required: '必須',    th_type: '型',    th_note: '備考',    th_len: '長さ',    val_yes: 'はい',    val_no: 'いいえ',    val_cond: '条件付き',    api_resend_title: '通知メール再送',    p_mid_name: '旅行会社統一番号', p_mid_note: '旅行会社の統一番号。',    p_postdata_name: '暗号化データ', p_postdata_note: '暗号化方法については、暗号化テストツールの説明を参照してください。',    p_ver_name: '連携プログラムバージョン', p_ver_note: '固定値 1.0。',    p_ts_name: 'タイムスタンプ', p_ts_note: 'Unix Epoch（1970年1月1日 00:00:00 GMT）からの秒数。PHPの場合はtime()関数を使用。例：2014-05-15 15:00:00のタイムスタンプは1400137200。',    p_mailtype_name: 'メールタイプ', p_mailtype_note: '送信するメールの種類に対応するパラメータ。1=発行、2=値引、3=無効',    p_inum_name: '領収書番号', p_inum_note: '今回照会の領収書番号。',    p_sysno_name: '値引・無効シリアル番号', p_sysno_note: '今回の再送対象の値引票または無効票のシステムシリアル番号。MailTypeが2または3の場合のみ必須。',    p_bemail_name: '受信者メールアドレス', p_bemail_note: '今回の再送用メールアドレス。複数のアドレスを区切るには半角カンマを使用。',    r_status_name: 'リターンステータス', r_status_note: '1. 再送成功時はSUCCESSを返却。 2. 失敗時はエラーコードを返却。',    r_msg_name: 'リターンメッセージ', r_msg_note: '今回の状態を記述するテキスト。',    r_chk_name: 'チェックコード', r_chk_note: '今回のデータ返却の正当性を検証するために使用。',    r_end_name: '文字列終了', r_end_note: '固定で ## を返却。String方式でデータを受信するユーザーは、EndStr=## を判定してデータ伝送の完全性を確認する必要があります。',    err_KEY10001: '旅行会社API連携IPではありません', err_note_KEY10001: '',    err_KEY10002: 'データ復号化エラー', err_note_KEY10002: '',    err_KEY10003: 'バージョンエラー', err_note_KEY10003: '',    err_KEY10004: 'データ不完全', err_note_KEY10004: '',    err_KEY10009: '旅行会社統一番号返却失敗', err_note_KEY10009: 'MerchantID_ パラメータのスペルを確認してください',    err_KEY10010: '旅行会社統一番号が空白', err_note_KEY10010: 'MerchantID_ 欄を確認してください',    err_KEY10011: 'PostData_ 欄が空白', err_note_KEY10011: '',    err_KEY10012: 'データ転送エラー', err_note_KEY10012: 'パラメータのスペルと形式を再確認してください',    err_KEY10013: 'データが空白', err_note_KEY10013: '',    err_KEY10014: '操作タイムアウト', err_note_KEY10014: '通常はI/Oのタイムアウトを指します',    err_KEY10019: '旅行会社統一番号エラー / アカウント停止中', err_note_KEY10019: '',    err_NOR10001: 'ネットワーク接続異常', err_note_NOR10001: '',    err_INV70001: 'フィールドデータ形式エラー', err_note_INV70001: '',    err_SM10001: 'メールタイプエラー', err_note_SM10001: 'MailType欄を確認してください',    err_SM10002: '通知メールアドレスエラー', err_note_SM10002: 'BuyerEmail欄を確認してください',    err_BS10006: '領収書データなし', err_note_BS10006: '',    err_BS10015: '値引番号未入力', err_note_BS10015: '',    err_BS10016: '無効番号未入力', err_note_BS10016: '',    err_BS10017: '値引データが見つかりません', err_note_BS10017: '',    err_BS10018: '無効データが見つかりません', err_note_BS10018: ''}            },        
            'ko': {name: '한국어',data: {    page_title: '전자 영수증 알림 메일 재발송 API 문서',    header_mobile_title: '알림 메일 재발송 API',    sidebar_brand: 'TRINVI',    sidebar_subtitle: '전자 영수증 부가 서비스 플랫폼',    sidebar_version: '재발송 V1.0.2',    nav_intro: '소개 및 기능',    nav_setup: '연동 준비',    nav_tool: '암호화 테스트 도구',    nav_group_func: '재발송 작업',    nav_resend: '알림 메일 재발송',    nav_group_appendix: '부록',    nav_errors: '오류 코드표',    nav_example: '코드 예제',    intro_title: '소개 및 기능',    intro_desc: '여행업 협회 회원들이 API 연동을 통해 알림 메일을 재발송할 수 있도록 지원합니다. 이 API는 메일 유형(MailType)을 사용하여 영수증 발행, 무효 전표 또는 공제(할인) 전표 알림을 구분하며, 재발송 프로세스를 완료하려면 수신자의 이메일 주소를 지정해야 합니다. 주의: 이 플랫폼은 매체 신고 메커니즘을 제공하지 않으므로, 여행사는 관련 업무를 직접 수행해야 합니다.',    intro_funcs_title: '주요 기능',    usecase_1_title: '각종 알림 재발송',    usecase_1_desc: '발행, 무효 및 공제(할인) 메일 재발송을 지원합니다.',    usecase_2_title: '다중 수신자 지원',    usecase_2_desc: '여러 수신자 이메일 주소(쉼표로 구분)를 지정하여 고객이 알림을 확실히 받을 수 있도록 합니다.',    setup_title: '연동 준비',    setup_card1_title: '키(Key) 발급',    setup_card1_desc: '전자 영수증 플랫폼 관리자 페이지에 로그인하여 가맹점 ID(MerchantID) 및 해당 Hash Key와 Hash IV를 확인해야 합니다.',    setup_card2_title: 'URL 확인',    setup_card2_desc: '<span class="block mb-1"><b>테스트 환경:</b> <code class="text-blue-600">https://capi.travelinvoice.com.tw/notification_resend</code></span><span class="block"><b>운영 환경:</b> <code class="text-green-600">https://api.travelinvoice.com.tw/notification_resend</code></span>',    tool_title: '암호화 테스트 도구',    tool_intro: '이 도구는 PostData_ 암호화 문자열 생성 또는 규칙에 따른 CheckCode 생성을 지원합니다.',    tool_tab_encrypt: 'PostData 암호화',    tool_tab_decrypt: 'PostData 복호화',    tool_tab_checkcode: 'CheckCode 생성',    tool_ph_key: '예: abcdefghijklmnopqrstuvwxyzabcdef (32 bytes)',    tool_ph_iv: '예: 1234567890123456 (16 bytes)',    tool_lbl_qs: '원본 문자열 (Query String 형식)',    tool_ph_qs: '예: Version=1.0&TimeStamp=1588320000&MailType=1&InvoiceNumber=T13671008&BuyerEmail=test@travelinvoice.com.tw',    tool_note_qs: '형식이 Key=Value&Key2=Value2 인지 확인하십시오.',    tool_btn_encrypt: '암호화 실행 (AES-256-CBC)',    tool_lbl_hex: 'PostData 암호화 결과 (Hex)',    tool_lbl_enc_hex: '암호화 문자열 (Hex String)',    tool_ph_enc_hex: '예: 2aab1c3b6ec7ee38c05921c478c3e24cb2d54e99c94b5536e2d0767e7588cf7620ce512a9d57a688f7cf7a3b9786f38d900299248cd2d0c83a1c950b486e02cf9edd67e37ee8e5185795934f69cacd4f21c9a369b245ddeed0b198a24cbce577b53ffff13bbd88acc505f88609c3d35b76f0716e9c22e0f7b5e5c5edc21e09c2',    tool_btn_decrypt: '복호화 실행',    tool_lbl_decrypt_res: '복호화 결과',    tool_btn_checkcode: 'CheckCode 생성',    tool_lbl_checkcode_res: 'CheckCode 결과',    tool_lbl_cc_mid: 'MerchantID (여행사 사업자 번호)',    tool_lbl_cc_invtrans: 'InvoiceTransNo (플랫폼 일련번호)',    tool_lbl_cc_mord: 'MerchantOrderNo (사용자 정의 ID)',    tool_lbl_cc_rand: 'RandomNum (랜덤 코드)',    tool_lbl_cc_amt: 'TotalAmt (영수증 금액)',    tool_cc_desc: 'MerchantID, InvoiceTransNo, MerchantOrderNo, RandomNum, TotalAmt를 알파벳 순서(A-Z)로 정렬하여 연결하고, 앞뒤에 HashIV와 HashKey를 추가한 후 SHA256으로 암호화합니다.',    tool_rule_title: '암호화 및 체크 코드 연산 규칙 설명',    tool_rule_aes_title: 'AES 암호화 규칙 (PostData_)',    tool_rule_aes_1: '알고리즘: AES-256-CBC',    tool_rule_aes_2: '패딩: PKCS7 (일부 언어에서는 수동 패딩 필요)',    tool_rule_aes_3: '변환: 파라미터를 Query String으로 조합한 후 암호화',    tool_rule_aes_4: '출력: Hex String으로 변환 (대소문자 구분 없음)',    tool_rule_chk_title: 'CheckCode 생성 규칙',    tool_rule_chk_1: '정렬: 지정된 필드를 알파벳 순서(A-Z)로 정렬',    tool_rule_chk_2: '연결: Query String (Key=Value&...) 으로 변환',    tool_rule_chk_3: '앞뒤 연결: HashIV=...&...&HashKey=...',    tool_rule_chk_4: '연산: SHA256 해시 후 대문자로 변환',    err_title: '오류 코드표',    err_ph: '코드 또는 원인 검색...',    th_err_code: '오류 코드',    th_err_reason: '오류 원인',    th_err_note: '비고',    example_title: '코드 예제',    lbl_api_url_test: 'URL (테스트 환경)',    lbl_api_url_prod: 'URL (운영 환경)',    lbl_lvl1_title: '1단계 파라미터 (HTTP Post)',    lbl_lvl2_req_title: 'PostData_ 포함 파라미터 (요청)',    lbl_lvl2_res_title: 'Response 응답 파라미터 (String)',    th_param: '파라미터명',    th_name: '명칭',    th_required: '필수',    th_type: '타입',    th_note: '비고',    th_len: '길이',    val_yes: '예',    val_no: '아니요',    val_cond: '조건부',    api_resend_title: '알림 메일 재발송',    p_mid_name: '여행사 사업자 번호', p_mid_note: '여행사의 사업자 등록 번호입니다.',    p_postdata_name: '암호화 데이터', p_postdata_note: '암호화 방법은 암호화 테스트 도구 설명을 참조하십시오.',    p_ver_name: '연동 프로그램 버전', p_ver_note: '고정값 1.0.',    p_ts_name: '타임스탬프', p_ts_note: 'Unix Epoch(1970년 1월 1일 00:00:00 GMT) 이후의 초. PHP의 경우 time() 함수를 사용. 예: 2014-05-15 15:00:00의 타임스탬프는 1400137200.',    p_mailtype_name: '메일 유형', p_mailtype_note: '발송할 메일 종류에 해당하는 파라미터. 1=발행, 2=공제(할인), 3=무효',    p_inum_name: '영수증 번호', p_inum_note: '이번 조회된 영수증 번호.',    p_sysno_name: '공제·무효 일련번호', p_sysno_note: '이번 재발송 대상인 공제 전표 또는 무효 전표의 시스템 일련번호. MailType이 2 또는 3인 경우에만 필수.',    p_bemail_name: '수신자 이메일 주소', p_bemail_note: '이번 재발송용 이메일 주소. 여러 주소를 구분하려면 반각 쉼표를 사용.',    r_status_name: '반환 상태', r_status_note: '1. 재발송 성공 시 SUCCESS 반환. 2. 실패 시 오류 코드 반환.',    r_msg_name: '반환 메시지', r_msg_note: '현재 상태를 설명하는 텍스트.',    r_chk_name: '체크 코드', r_chk_note: '이번 데이터 반환의 유효성을 검증하는 데 사용됩니다.',    r_end_name: '문자열 종료', r_end_note: '고정으로 ## 반환. String 방식으로 데이터를 수신하는 사용자는 EndStr=## 을 확인하여 데이터 전송의 완전성을 확인해야 합니다.',    err_KEY10001: '여행사 API 연동 IP가 아닙니다', err_note_KEY10001: '',    err_KEY10002: '데이터 복호화 오류', err_note_KEY10002: '',    err_KEY10003: '버전 오류', err_note_KEY10003: '',    err_KEY10004: '데이터 불완전', err_note_KEY10004: '',    err_KEY10009: '여행사 사업자 번호 반환 실패', err_note_KEY10009: 'MerchantID_ 파라미터의 철자를 확인하십시오',    err_KEY10010: '여행사 사업자 번호가 공란입니다', err_note_KEY10010: 'MerchantID_ 필드를 확인하십시오',    err_KEY10011: 'PostData_ 필드가 공란입니다', err_note_KEY10011: '',    err_KEY10012: '데이터 전송 오류', err_note_KEY10012: '파라미터의 철자와 형식을 재확인하십시오',    err_KEY10013: '데이터가 공란입니다', err_note_KEY10013: '',    err_KEY10014: '작업 시간 초과', err_note_KEY10014: '일반적으로 I/O 시간 초과를 의미합니다',    err_KEY10019: '여행사 사업자 번호 오류 / 계정 정지됨', err_note_KEY10019: '',    err_NOR10001: '네트워크 연결 이상', err_note_NOR10001: '',    err_INV70001: '필드 데이터 형식 오류', err_note_INV70001: '',    err_SM10001: '메일 유형 오류', err_note_SM10001: 'MailType 필드를 확인하십시오',    err_SM10002: '알림 이메일 오류', err_note_SM10002: 'BuyerEmail 필드를 확인하십시오',    err_BS10006: '영수증 데이터 없음', err_note_BS10006: '',    err_BS10015: '공제 번호 미입력', err_note_BS10015: '',    err_BS10016: '무효 번호 미입력', err_note_BS10016: '',    err_BS10017: '공제 데이터를 찾을 수 없습니다', err_note_BS10017: '',    err_BS10018: '무효 데이터를 찾을 수 없습니다', err_note_BS10018: ''}            },        
        };

        const apiDefinitions = [
            {
                id: 'api_notification_resend',
                titleKey: 'api_resend_title',
                urls: {
                    test: 'https://capi.travelinvoice.com.tw/notification_resend',
                    prod: 'https://api.travelinvoice.com.tw/notification_resend'
                },
                lvl1: [
                    { name: 'MerchantID_', nameKey: 'p_mid_name', req: true, type: 'Varchar(8)', noteKey: 'p_mid_note' },
                    { name: 'PostData_', nameKey: 'p_postdata_name', req: true, type: 'text', noteKey: 'p_postdata_note' }
                ],
                lvl2: [
                    { name: 'Version', nameKey: 'p_ver_name', req: true, type: 'Varchar(5)', len: '5', noteKey: 'p_ver_note' },
                    { name: 'TimeStamp', nameKey: 'p_ts_name', req: true, type: 'Varchar(30)', len: '30', noteKey: 'p_ts_note' },
                    { name: 'MailType', nameKey: 'p_mailtype_name', req: true, type: 'Int(1)', len: '1', noteKey: 'p_mailtype_note' },
                    { name: 'InvoiceNumber', nameKey: 'p_inum_name', req: true, type: 'Varchar(9)', len: '9', noteKey: 'p_inum_note' },
                    { name: 'SystemCorrespondNo', nameKey: 'p_sysno_name', req: 'cond', type: 'Varchar(20)', len: '20', noteKey: 'p_sysno_note' },
                    { name: 'BuyerEmail', nameKey: 'p_bemail_name', req: true, type: 'Varchar(100)', len: '100', noteKey: 'p_bemail_note' }
                ],
                res: [
                    { name: 'Status', nameKey: 'r_status_name', type: 'Varchar(10)', noteKey: 'r_status_note' },
                    { name: 'Message', nameKey: 'r_msg_name', type: 'Varchar(30)', noteKey: 'r_msg_note' },
                    { name: 'MerchantID', nameKey: 'p_mid_name', type: 'Varchar(8)', noteKey: 'p_mid_note' },
                    { name: 'CheckCode', nameKey: 'r_chk_name', type: 'Varchar(150)', noteKey: 'r_chk_note' },
                    { name: 'EndStr', nameKey: 'r_end_name', type: 'Varchar(2)', noteKey: 'r_end_note' }
                ]
            }
        ];

        const errorCodes = [
            { code: 'KEY10001', key: 'err_KEY10001', note: 'err_note_KEY10001' },
            { code: 'KEY10002', key: 'err_KEY10002', note: 'err_note_KEY10002' },
            { code: 'KEY10003', key: 'err_KEY10003', note: 'err_note_KEY10003' },
            { code: 'KEY10004', key: 'err_KEY10004', note: 'err_note_KEY10004' },
            { code: 'KEY10009', key: 'err_KEY10009', note: 'err_note_KEY10009' },
            { code: 'KEY10010', key: 'err_KEY10010', note: 'err_note_KEY10010' },
            { code: 'KEY10011', key: 'err_KEY10011', note: 'err_note_KEY10011' },
            { code: 'KEY10012', key: 'err_KEY10012', note: 'err_note_KEY10012' },
            { code: 'KEY10013', key: 'err_KEY10013', note: 'err_note_KEY10013' },
            { code: 'KEY10014', key: 'err_KEY10014', note: 'err_note_KEY10014' },
            { code: 'KEY10019', key: 'err_KEY10019', note: 'err_note_KEY10019' },
            { code: 'NOR10001', key: 'err_NOR10001', note: 'err_note_NOR10001' },
            { code: 'INV70001', key: 'err_INV70001', note: 'err_note_INV70001' },
            { code: 'SM10001', key: 'err_SM10001', note: 'err_note_SM10001' },
            { code: 'SM10002', key: 'err_SM10002', note: 'err_note_SM10002' },
            { code: 'BS10006', key: 'err_BS10006', note: 'err_note_BS10006' },
            { code: 'BS10015', key: 'err_BS10015', note: 'err_note_BS10015' },
            { code: 'BS10016', key: 'err_BS10016', note: 'err_note_BS10016' },
            { code: 'BS10017', key: 'err_BS10017', note: 'err_note_BS10017' },
            { code: 'BS10018', key: 'err_BS10018', note: 'err_note_BS10018' }
        ];

        const codeExamples = {
            php: `<?php
// PHP Example: Notification Resend API

// Padding function (PKCS7)
function add_padding($string, $blocksize = 32) {
    $len = strlen($string);
    $pad = $blocksize - ($len % $blocksize);
    $string .= str_repeat(chr($pad), $pad);
    return $string;
}

// 1. Setup Parameters
$key = 'abcdefghijklmnopqrstuvwxyzabcdef'; // Your Hash Key (32 bytes)
$iv  = '1234567890123456';             // Your Hash IV (16 bytes)
$merchantID = '70565326';
$url = 'https://capi.travelinvoice.com.tw/notification_resend';

// 2. Prepare PostData Array
$postDataArray = [
    'Version' => '1.0',
    'TimeStamp' => time(),
    'MailType' => '1', // 1=Issue, 2=Allowance, 3=Invalid
    'InvoiceNumber' => 'T13671008',
    'SystemCorrespondNo' => '', // Required if MailType is 2 or 3
    'BuyerEmail' => 'test@travelinvoice.com.tw'
];

// 3. Convert to Query String and Encrypt
$postDataStr = http_build_query($postDataArray);
// Note: Use OPENSSL_RAW_DATA | OPENSSL_ZERO_PADDING with manual padding
$encrypted = openssl_encrypt(add_padding($postDataStr), 'aes-256-cbc', $key, OPENSSL_RAW_DATA | OPENSSL_ZERO_PADDING, $iv);
$postDataHex = bin2hex($encrypted);

// 4. Submit via CURL
$ch = curl_init();
$postFields = http_build_query([
    'MerchantID_' => $merchantID,
    'PostData_' => $postDataHex
]);

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch);

// Output result (Format: Status=SUCCESS&Message=...&CheckCode=...&EndStr=##)
print_r($response);

// You can parse the response string back to array using parse_str()
parse_str($response, $responseArray);
print_r($responseArray);
?>`,
            nodejs: `const crypto = require('crypto');
const querystring = require('querystring');
const axios = require('axios');

// 1. Setup Parameters
const key = 'abcdefghijklmnopqrstuvwxyzabcdef'; // 32 bytes
const iv  = '1234567890123456';             // 16 bytes
const merchantID = '70565326';
const url = 'https://capi.travelinvoice.com.tw/notification_resend';

// 2. Prepare Parameters
const params = {
    Version: '1.0',
    TimeStamp: Math.floor(Date.now() / 1000),
    MailType: '1', // 1=Issue, 2=Allowance, 3=Invalid
    InvoiceNumber: 'T13671008',
    SystemCorrespondNo: '',
    BuyerEmail: 'test@travelinvoice.com.tw'
};

// 3. Convert to Query String
const dataString = querystring.stringify(params);

// 4. AES Encryption (Node.js crypto uses PKCS7 by default)
const cipher = crypto.createCipheriv('aes-256-cbc', key, iv);
let encrypted = cipher.update(dataString, 'utf8', 'hex');
encrypted += cipher.final('hex');

// 5. Send POST Request
const formBody = querystring.stringify({
    MerchantID_: merchantID,
    PostData_: encrypted
});

axios.post(url, formBody, {
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
}).then(res => {
    console.log('Raw Response:', res.data);
    // Parse query string response
    const parsed = querystring.parse(res.data);
    console.log('Parsed:', parsed);
}).catch(err => {
    console.error(err);
});`,
            python: `import time
import urllib.parse
import requests
from Crypto.Cipher import AES
from Crypto.Util.Padding import pad
import binascii

# 1. Setup Parameters
key = b'abcdefghijklmnopqrstuvwxyzabcdef' # 32 bytes
iv  = b'1234567890123456'             # 16 bytes
merchant_id = '70565326'
url = 'https://capi.travelinvoice.com.tw/notification_resend'

# 2. Prepare Parameters
params = {
    'Version': '1.0',
    'TimeStamp': int(time.time()),
    'MailType': '1', # 1=Issue, 2=Allowance, 3=Invalid
    'InvoiceNumber': 'T13671008',
    'SystemCorrespondNo': '',
    'BuyerEmail': 'test@travelinvoice.com.tw'
}

# 3. Convert to Query String
data_string = urllib.parse.urlencode(params)

# 4. AES Encryption (PKCS7 Padding)
cipher = AES.new(key, AES.MODE_CBC, iv)
encrypted_bytes = cipher.encrypt(pad(data_string.encode('utf-8'), AES.block_size))
post_data_hex = binascii.hexlify(encrypted_bytes).decode('utf-8')

# 5. Send Request
payload = {
    'MerchantID_': merchant_id,
    'PostData_': post_data_hex
}
response = requests.post(url, data=payload)
print('Raw Response:', response.text)

# Parse response
response_dict = urllib.parse.parse_qs(response.text)
print('Parsed:', response_dict)`,
            csharp: `using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Http;
using System.Security.Cryptography;
using System.Text;
using System.Web;
using System.Threading.Tasks;

public class Program
{
    public static async Task Main()
    {
        string key = "abcdefghijklmnopqrstuvwxyzabcdef";
        string iv = "1234567890123456";
        string merchantID = "70565326";
        string url = "https://capi.travelinvoice.com.tw/notification_resend";

        // Prepare Parameters
        var paramsDict = new Dictionary<string, string>
        {
            { "Version", "1.0" },
            { "TimeStamp", DateTimeOffset.Now.ToUnixTimeSeconds().ToString() },
            { "MailType", "1" },
            { "InvoiceNumber", "T13671008" },
            { "SystemCorrespondNo", "" },
            { "BuyerEmail", "test@travelinvoice.com.tw" }
        };

        // Convert to Query String
        string dataString = string.Join("&", paramsDict.Select(p => $"{p.Key}={HttpUtility.UrlEncode(p.Value)}"));

        // Encrypt
        string postDataHex = EncryptAES256(dataString, key, iv);

        // Send
        using (var client = new HttpClient())
        {
            var content = new FormUrlEncodedContent(new[]
            {
                new KeyValuePair<string, string>("MerchantID_", merchantID),
                new KeyValuePair<string, string>("PostData_", postDataHex)
            });

            var response = await client.PostAsync(url, content);
            string result = await response.Content.ReadAsStringAsync();
            Console.WriteLine("Raw Response: " + result);
            
            // Parse Query String
            var parsed = HttpUtility.ParseQueryString(result);
            Console.WriteLine("Status: " + parsed["Status"]);
        }
    }

    public static string EncryptAES256(string source, string key, string iv)
    {
        byte[] sourceBytes = Encoding.UTF8.GetBytes(source);
        using (var aes = Aes.Create())
        {
            aes.Mode = CipherMode.CBC;
            aes.Padding = PaddingMode.PKCS7;
            aes.Key = Encoding.UTF8.GetBytes(key);
            aes.IV = Encoding.UTF8.GetBytes(iv);

            using (var encryptor = aes.CreateEncryptor())
            {
                byte[] encryptedBytes = encryptor.TransformFinalBlock(sourceBytes, 0, sourceBytes.Length);
                return BitConverter.ToString(encryptedBytes).Replace("-", "").ToLower();
            }
        }
    }
}`
        };

        // --- Core Logic ---
        let currentLang = 'zh-TW';
        let currentCodeTab = 'php';

        // Add URL parameter support
        const urlParams = new URLSearchParams(window.location.search);
        const paramLang = urlParams.get('lang');
        if (paramLang) {
            const foundLang = Object.keys(langData).find(key => 
                key.toLowerCase() === paramLang.toLowerCase()
            );
            if (foundLang) {
                currentLang = foundLang;
            }
        }

        function applyTranslations(lang) {
            const data = langData[lang]?.data;
            if (!data) return;

            // Simple text replacements
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (data[key]) el.innerHTML = data[key];
            });

            // Placeholder replacements
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (data[key]) el.setAttribute('placeholder', data[key]);
            });

            // Dynamic API Template Rendering
            renderApiTemplates(data);
        }

        function renderApiTemplates(data) {
            const container = document.getElementById('api-container');
            if (!container) return;
            container.innerHTML = '';

            apiDefinitions.forEach(api => {
                const title = data[api.titleKey];
                
                // Build Level 1 Rows
                const lvl1Rows = api.lvl1.map(p => `
                    <tr>
                        <td class="px-4 py-2 font-mono font-bold text-blue-600">${p.name}</td>
                        <td class="px-4 py-2">${data[p.nameKey] || ''}</td>
                        <td class="px-4 py-2"><span class="required-badge">${data['val_yes']}</span></td>
                        <td class="px-4 py-2 font-mono">${p.type}</td>
                        <td class="px-4 py-2">${data[p.noteKey] || ''}</td>
                    </tr>
                `).join('');

                // Build Level 2 Rows
                const lvl2Rows = api.lvl2.map(p => {
                    let reqBadge = '';
                    if (p.req === true) reqBadge = `<span class="required-badge">${data['val_yes']}</span>`;
                    else if (p.req === false) reqBadge = `<span class="optional-badge">${data['val_no']}</span>`;
                    else if (p.req === 'cond') reqBadge = `<span class="cond-badge">${data['val_cond']}</span>`;

                    return `<tr>
                        <td class="px-4 py-2 font-mono font-medium">${p.name}</td>
                        <td class="px-4 py-2">${data[p.nameKey] || ''}</td>
                        <td class="px-4 py-2 text-center">${reqBadge}</td>
                        <td class="px-4 py-2 font-mono text-xs">${p.type}</td>
                        <td class="px-4 py-2 font-mono text-xs">${p.len}</td>
                        <td class="px-4 py-2">${data[p.noteKey] || ''}</td>
                    </tr>`;
                }).join('');

                // Build Response Rows
                const resRows = api.res.map(r => `
                    <tr>
                        <td class="px-4 py-2 font-mono font-bold text-blue-600">${r.name}</td>
                        <td class="px-4 py-2">${data[r.nameKey] || ''}</td>
                        <td class="px-4 py-2 font-mono text-xs">${r.type}</td>
                        <td class="px-4 py-2">${data[r.noteKey] || ''}</td>
                    </tr>
                `).join('');

                const sectionHtml = `
                <section id="${api.id}" class="mb-12 scroll-mt-24">
                    <div class="flex items-center mb-6">
                        <div class="w-2 h-8 bg-blue-600 mr-4 rounded-sm"></div>
                        <h2 class="text-2xl font-bold text-slate-900">${title}</h2>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-6">
                            <div class="bg-slate-50 p-3 rounded border border-slate-100 break-all">
                                <span class="font-bold text-slate-700 block mb-1">${data['lbl_api_url_test']}</span>
                                <code class="text-blue-600">${api.urls.test}</code>
                            </div>
                            <div class="bg-slate-50 p-3 rounded border border-slate-100 break-all">
                                <span class="font-bold text-slate-700 block mb-1">${data['lbl_api_url_prod']}</span>
                                <code class="text-green-600">${api.urls.prod}</code>
                            </div>
                        </div>

                        <h4 class="font-bold text-slate-700 mb-2">${data['lbl_lvl1_title']}</h4>
                        <div class="overflow-x-auto mb-8 border rounded-lg">
                            <table class="w-full text-left text-sm params-table">
                                <thead class="bg-slate-50">
                                    <tr>
                                        <th class="px-4 py-2 w-1/5">${data['th_param']}</th>
                                        <th class="px-4 py-2 w-1/5">${data['th_name']}</th>
                                        <th class="px-4 py-2 w-20">${data['th_required']}</th>
                                        <th class="px-4 py-2 w-1/6">${data['th_type']}</th>
                                        <th class="px-4 py-2">${data['th_note']}</th>
                                    </tr>
                                </thead>
                                <tbody>${lvl1Rows}</tbody>
                            </table>
                        </div>

                        <h4 class="font-bold text-slate-700 mb-2">${data['lbl_lvl2_req_title']}</h4>
                        <div class="overflow-x-auto border rounded-lg max-h-[500px] overflow-y-auto mb-8">
                            <table class="w-full text-left text-sm params-table">
                                <thead class="bg-slate-50 sticky top-0 shadow-sm">
                                    <tr>
                                        <th class="px-4 py-2 w-1/5">${data['th_param']}</th>
                                        <th class="px-4 py-2 w-1/5">${data['th_name']}</th>
                                        <th class="px-4 py-2 w-20 text-center">${data['th_required']}</th>
                                        <th class="px-4 py-2 w-20">${data['th_type']}</th>
                                        <th class="px-4 py-2 w-20">${data['th_len']}</th>
                                        <th class="px-4 py-2">${data['th_note']}</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-100">${lvl2Rows}</tbody>
                            </table>
                        </div>

                        <h4 class="font-bold text-slate-700 mb-2">${data['lbl_lvl2_res_title']}</h4>
                        <div class="overflow-x-auto border rounded-lg max-h-[500px] overflow-y-auto">
                            <table class="w-full text-left text-sm params-table">
                                <thead class="bg-slate-50 sticky top-0 shadow-sm">
                                    <tr>
                                        <th class="px-4 py-2 w-1/5">${data['th_param']}</th>
                                        <th class="px-4 py-2 w-1/5">${data['th_name']}</th>
                                        <th class="px-4 py-2 w-20">${data['th_type']}</th>
                                        <th class="px-4 py-2">${data['th_note']}</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-100">${resRows}</tbody>
                            </table>
                        </div>
                    </div>
                </section>
                `;
                container.innerHTML += sectionHtml;
            });
        }

        function initLangDropdown() {
            const select = document.getElementById('lang-select');
            const languages = Object.keys(langData);
            if (languages.length === 0) return;

            select.innerHTML = '';
            languages.forEach(langKey => {
                const option = document.createElement('option');
                option.value = langKey;
                option.textContent = langData[langKey].name;
                if(langKey === currentLang) option.selected = true;
                select.appendChild(option);
            });
        }

        function changeLang(targetLang) {
            currentLang = targetLang;
            applyTranslations(targetLang);
        }

        function renderErrorTable() {
            const tbody = document.querySelector('#errorTable tbody');
            const data = langData[currentLang]?.data;
            if (!tbody || !data) return;
            
            tbody.innerHTML = errorCodes.map(err => `
                <tr class="hover:bg-slate-50">
                    <td class="px-6 py-3 font-bold text-red-600 font-mono">${err.code}</td>
                    <td class="px-6 py-3 text-slate-600"><span data-i18n="${err.key}">${data[err.key] || ''}</span></td>
                    <td class="px-6 py-3 text-slate-500 text-xs"><span data-i18n="${err.note}">${data[err.note] || ''}</span></td>
                </tr>
            `).join('');
        }

        window.onload = function() {
            initLangDropdown();
            renderErrorTable();
            applyTranslations(currentLang);
            loadCode(currentCodeTab);
        };

        function switchTab(lang, event) {
            document.querySelectorAll('#example .tab-btn').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
            currentCodeTab = lang;
            loadCode(lang);
        }

        function loadCode(lang) {
            const display = document.getElementById('code-display');
            display.value = codeExamples[lang] || "// Code example not available.";
        }

        function switchToolTab(tabId) {
            document.querySelectorAll('.tool-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tool-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tool-tab-btn').forEach(el => {
                el.classList.remove('active', 'border-purple-600', 'text-purple-600');
                el.classList.add('border-transparent', 'text-slate-500');
            });

            const targetContent = document.getElementById(tabId);
            targetContent.classList.remove('hidden');
            targetContent.classList.add('active');

            const btn = event.currentTarget;
            btn.classList.remove('border-transparent', 'text-slate-500');
            btn.classList.add('active', 'border-purple-600', 'text-purple-600');
        }

        const menuBtn = document.getElementById('menu-btn');
        const sidebar = document.getElementById('sidebar');
        let isMenuOpen = false;

        menuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            sidebar.classList.toggle('-translate-x-full');
        });

        const searchInput = document.getElementById('errorSearch');
        searchInput.addEventListener('keyup', (e) => {
            const term = e.target.value.toLowerCase();
            const tableRows = document.querySelectorAll('#errorTable tbody tr');
            tableRows.forEach(row => {
                const code = row.children[0].textContent.toLowerCase();
                const reason = row.children[1].textContent.toLowerCase();
                if (code.includes(term) || reason.includes(term)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });

        // --- Tools Logic ---

        function getKeys() {
            const key = document.getElementById('toolKey').value.trim();
            const iv = document.getElementById('toolIv').value.trim();
            
            if (!key || !iv) {
                alert('請輸入 Hash Key (32碼) 與 Hash IV (16碼)');
                return null;
            }
            return { key, iv };
        }

        function runEncrypt() {
            const keys = getKeys();
            if (!keys) return;
            const data = document.getElementById('encryptInput').value.trim();
            if (!data) return alert('請輸入原始字串');

            try {
                const keyHex = CryptoJS.enc.Utf8.parse(keys.key);
                const ivHex = CryptoJS.enc.Utf8.parse(keys.iv);

                const encrypted = CryptoJS.AES.encrypt(data, keyHex, {
                    iv: ivHex,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });

                document.getElementById('encryptOutput').value = encrypted.ciphertext.toString(CryptoJS.enc.Hex);
            } catch (e) {
                alert('Encrypt Error: ' + e.message);
            }
        }

        function runDecrypt() {
            const keys = getKeys();
            if (!keys) return;
            const hexStr = document.getElementById('decryptInput').value.trim();
            if (!hexStr) return alert('請輸入加密後的 Hex 字串');

            try {
                const keyHex = CryptoJS.enc.Utf8.parse(keys.key);
                const ivHex = CryptoJS.enc.Utf8.parse(keys.iv);
                
                const encryptedHex = CryptoJS.enc.Hex.parse(hexStr);
                const encryptedBase64 = CryptoJS.enc.Base64.stringify(encryptedHex);

                const decrypted = CryptoJS.AES.decrypt(encryptedBase64, keyHex, {
                    iv: ivHex,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });

                const result = decrypted.toString(CryptoJS.enc.Utf8);
                if(!result) throw new Error("Result is empty");
                document.getElementById('decryptOutput').value = result;
            } catch (e) {
                alert('Decrypt Failed: Check Key/IV');
            }
        }

        function runCheckCode() {
            const keys = getKeys();
            if (!keys) return;

            // Get values specific to Notification Resend Appendix 2 (CheckCode Rule)
            const mid = document.getElementById('cc_mid').value.trim();
            const invTrans = document.getElementById('cc_invtrans').value.trim();
            const mOrd = document.getElementById('cc_mord').value.trim();
            const rand = document.getElementById('cc_rand').value.trim();
            const amt = document.getElementById('cc_amt').value.trim();

            if (!mid || !invTrans || !mOrd || !rand || !amt) {
                alert('所有欄位皆為必填');
                return;
            }

            const params = {
                'MerchantID': mid,
                'InvoiceTransNo': invTrans,
                'MerchantOrderNo': mOrd,
                'RandomNum': rand,
                'TotalAmt': amt
            };

            try {
                // Sort keys A-Z
                const sortedKeys = Object.keys(params).sort();
                
                const sortedParams = [];
                sortedKeys.forEach(key => {
                    sortedParams.push(`${key}=${params[key]}`);
                });
                
                const sortedString = sortedParams.join('&');
                const checkStr = `HashIV=${keys.iv}&${sortedString}&HashKey=${keys.key}`;
                const hash = CryptoJS.SHA256(checkStr).toString(CryptoJS.enc.Hex).toUpperCase();
                
                document.getElementById('checkCodeOutput').value = hash;

            } catch (e) {
                alert('Error: ' + e.message);
            }
        }

        // Scroll Spy
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            let current = '';

            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            });

            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 50) {
                 if (sections.length > 0) {
                     current = sections[sections.length - 1].getAttribute('id');
                 }
            }

            navLinks.forEach(link => {
                link.classList.remove('sidebar-active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('sidebar-active');
                }
            });
        });
    </script>
</body>
</html>